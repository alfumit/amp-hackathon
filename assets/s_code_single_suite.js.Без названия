/* Init */

var prmOm = {};
if (typeof kaspersky != 'object') var kaspersky = {};

/* TODO MANUALLY SET THESE DEFAULTS */

prmOm.defaultPlatformName = 'NextGen';
prmOm.sCodeName = 's_code_single_suite.js';

prmOm.sCodeVersion = '20180802';
prmOm.sCodeBuild = '195';

/*
prmOm.notFiredTrackPageView = omReadCookie('omJsInitStartTime') || omReadCookie('omNotFiredTrackPageView') || 0;
if (prmOm.notFiredTrackPageView) {
	prmOm.notFiredTrackPageViewJson = '"t1":' + prmOm.notFiredTrackPageView;
	omSetCookie('omNotFiredTrackPageView', prmOm.notFiredTrackPageView, 1000);
}

prmOm.jsInitStartTime = new Date().getTime();
omSetCookie('omJsInitStartTime', prmOm.jsInitStartTime, 1000);
*/

/* prmOm settings */

if (/^www\.kaspersky\.(cz|ua|gr|ro|hu|rs|bg|ca)$/i.test(document.location.hostname)) prmOm.defaultPlatformName = 'Avangate Websites';
prmOm.isStaging = (kaspersky.isStaging === 0 || kaspersky.isStaging === "0" || kaspersky.testmode === 0 || kaspersky.testmode === "0") ? prmOm.isStaging = 0 : prmOm.isStaging = 1;
prmOm.pageCharset = kaspersky.pageCharset || kaspersky.pagecharset || 'UTF-8';
prmOm.platformName = kaspersky.platformName || prmOm.defaultPlatformName;
if (kaspersky.platformName == 'Micro Site') kaspersky.trackPageViewOnLoad = 0;

var omPlatformsSettings = {
	'NextGen': 'ng',
	'Avangate Websites': 'aw',
	'Digital River': 'dr',
	'Avangate': 'av',
	'Nexway': 'nw',
	'Element5': 'ef',
	'Allsoft': 'as',
	'Partner Portal': 'pp',
	'Avangate Partner Control Panel': 'ap',
	'Kaspersky Daily Blog': 'bl',
	'Kaspersky Motorsport': 'ms',
	'Earth 2050': 'ea',
	'OldGen': 'og',
	'OldGen Proxied': 'po',
	'Micro Site': 'mi',
	'Press Center': 'pc',
	'Marketo': 'ma',
	'Kaba365': 'kb',
	'Other': 'ot'
};

if (prmOm.platformName == 'NextGen') {
	prmOm.siteClass = 'Websites';
} else if (prmOm.platformName == 'EE Websites') {
	prmOm.siteClass = 'Websites';
} else if (prmOm.platformName == 'Digital River') {
	prmOm.isECommProvider = true;
	prmOm.eCommProviderChars = 'DR';
	prmOm.eCommProvider = 'Digital River';
	prmOm.siteClass = 'Shopping Cart';
} else if (prmOm.platformName == 'Avangate') {
	prmOm.isECommProvider = true;
	prmOm.eCommProviderChars = 'AV';
	prmOm.eCommProvider = 'Avangate';
	prmOm.siteClass = 'Shopping Cart';
} else if (prmOm.platformName == 'Nexway') {
	prmOm.isECommProvider = true;
	prmOm.eCommProviderChars = 'NW';
	prmOm.eCommProvider = 'Nexway';
	prmOm.siteClass = 'Shopping Cart';
} else if (prmOm.platformName == 'Element5') {
	prmOm.isECommProvider = true;
	prmOm.eCommProviderChars = 'EF';
	prmOm.eCommProvider = 'Element5';
	prmOm.siteClass = 'Shopping Cart';
} else if (prmOm.platformName == 'Allsoft') {
	prmOm.isECommProvider = true;
	prmOm.eCommProviderChars = 'AS';
	prmOm.eCommProvider = 'Allsoft';
	prmOm.siteClass = 'Shopping Cart';
} else if (prmOm.platformName == 'Partner Portal') {
	prmOm.siteClass = 'Partner Portal';
} else if (prmOm.platformName == 'Avangate Partner Control Panel') {
	prmOm.isECommProvider = true;
	prmOm.eCommProviderChars = 'AP';
	prmOm.eCommProvider = 'Avangate Partner Control Panel';
	prmOm.siteClass = 'Avangate Partner Control Panel';
} else if (prmOm.platformName == 'Kaspersky Daily Blog') {
	prmOm.siteClass = prmOm.platformName;
} else if (prmOm.platformName == 'Kaspersky Motorsport') {
	prmOm.siteClass = prmOm.platformName;
	prmOm.siteRegexp = /kms\.racing|kasperskymotorsport\.com/i;
} else if (prmOm.platformName == 'Earth 2050') {
	prmOm.siteClass = prmOm.platformName;
	prmOm.siteRegexp = /2050\.earth/i;
	prmOm.siteRegion = '[N/A]';
} else if (prmOm.platformName == 'OldGen') {
	prmOm.siteClass = kaspersky.siteClass || 'Websites';
} else if (prmOm.platformName == 'OldGen Proxied') {
	prmOm.siteClass = kaspersky.siteClass || 'Websites';
} else if (prmOm.platformName == 'Micro Site') {
	prmOm.siteClass = kaspersky.siteClass || 'Micro Sites';
} else if (prmOm.platformName == 'Press Center') {
	prmOm.siteClass = kaspersky.siteClass || 'Press Center';
} else if (prmOm.platformName == 'Marketo') {
	prmOm.siteClass = kaspersky.siteClass || 'Marketo';
} else if (prmOm.platformName == 'Kaba365') {
	prmOm.siteClass = kaspersky.siteClass || 'Kaba365';
} else if (prmOm.platformName == 'Default') {
	prmOm.siteClass = kaspersky.siteClass || 'Other';
} else {
	prmOm.pn = ''; // Traffic will be dropped completely for unknown platform
}

prmOm.isECommProvider = prmOm.isECommProvider || false;
prmOm.eCommProviderChars = prmOm.eCommProviderChars || 'XX';
prmOm.eCommProvider = prmOm.eCommProvider || '[NULL]';
prmOm.pn = omPlatformsSettings[prmOm.platformName] || '';

if (prmOm.pn == '') {
	prmOm.sAccountLive = '';
	prmOm.sAccountStaging = '';
} else if (prmOm.pn != 'pp' && prmOm.pn != 'ap') {
	if (prmOm.pn != 'ea' && prmOm.pn != 'ms') {
		prmOm.siteRegexp = /kaspersky\.com?\..{2}|kaspersky\..{2,3}|kaspersky-labs\.com|klamericas\.secure\.footprint\.net|store\.[a-z]{2,3}\.kaspersky\.com|secure\.avangate\.com|store\.digitalriver\.com|gc\.digitalriver\.com|secure\.element5\.com|ccc\.element5\.com|esd\.element5\.com|kaspersky\.nexway\.ch|klcolombia\.nexway\.com|bnlitaly\.nexway\.com|kaspersky\.softk\.kz|kaspersky\.softkey\.ru|kaspersky\.softkey\.ua|kaspersky\.allsoft\.ru|shop\.allsoft\.ru|kasperskyforbusiness\.com|ipp\.kaspersky\.com|kasperskystore.\pl|kaba365\.com|kl-racing\.com|klracing\.co\.za|kasperskyestore\.co\.kr/i;
	}
	prmOm.downloadRegexp = /.+\.kaspersky-labs\.com|klamericas\.secure\.footprint\.net|media\.kaspersky\.com|(download|lm)\.kaba365\.com|data\.kaspersky\.co\.jp/i;
	prmOm.downloadHrefRegexp = /^(https?:\/\/(go|usa)\.kaspersky\.com\/files\/.+)|(https?:\/\/advanced\.kaspersky\.ru\/files\/.+)/i;
	prmOm.saleButtonRegexp = /^(https?:\/\/((((store\.kaspersky\.([^/]+))|(gc\.digitalriver\.com)|(home\.kaspersky\.co\.jp))\/store\/kasper.+\/buy\/.+)|((store|secure)\.([a-z]{2,3}\.)?(kaspersky|avangate)\.([^\/]+)\/order\/checkout\.php\?(.+\&)?PRODS(\[[^]]+\]|\d*)\=.+)|((boutique|eloja|store|tienda)(-ipp)?.kaspersky.([^/]+)\/qte(_mvt)?.html\?(.+\&)?R\=.+)|(allsoft\.kaspersky\.[a-z]{2}\/basket\/add\/.+)|(softkey\.kaspersky\.[a-z]{2}\/\?(.+\&)?prodid\=.+)|((esd|secure)\.element5\.com\/(esales\/)?cart\.html\?(.+\&)?PRODUCT(\[|%5b)[^]]+(\]|%5d)\=.+)|(order\.shareit\.com\/cart\/add\?(.+\&)?PRODUCT\[[^]]+\]\=.+)|(kasperskystore\.pl\/addtocart\?(.+\&)?sku\=.+)))|(\/_svc\/price\.svc\/..-..\/route\.axd\?d\=.+)|(kaba365\.com\/mod\/(buy|cart)\.asp\?(parID|act)\=.+)|(\/mod\/(buy|cart)\.asp\?(parID|act)\=.+)|(kasperskyestore\.co\.kr\/mall\/products\/.+)$/i;
	prmOm.scRegexp = /(store|boutique|tienda|eloja)\.kaspersky\.com?\..{2}|(store|boutique|tienda|eloja)\.kaspersky\..{2,3}|(store|boutique|tienda|eloja)\.[a-z]{2,3}\.kaspersky\.com|secure\.avangate\.com|store\.digitalriver\.com|gc\.digitalriver\.com|secure\.element5\.com|ccc\.element5\.com|esd\.element5\.com|kaspersky\.nexway\.ch|klcolombia\.nexway\.com|bnlitaly\.nexway\.com|kaspersky\.softk\.kz|kaspersky\.softkey\.ru|kaspersky\.softkey\.ua|kaspersky\.allsoft\.ru|shop\.allsoft\.ru|sh\.kaba365\.com|passport\.pcstars\.com|kasperskyestore\.co\.kr/i;
	prmOm.siteType = 'Default';
	if (kaspersky.ipp == 1 || kaspersky.sectiontype == 'IPP' || kaspersky.sectionType == 'IPP' || kaspersky.sectiontype == 'ipp' || kaspersky.sectionType == 'ipp'){ // Legacy
		prmOm.siteType = 'IPP';
	} else if (kaspersky.theme == '29825400' || kaspersky.theme == '30272800' || kaspersky.sectiontype == 'mobile') {
		prmOm.siteType = 'Mobile';
	} else if (kaspersky.section == 'IFrame') {
		prmOm.siteType = 'IFrame';
	} else if (prmOm.pn == 'ng' || prmOm.pn == 'nw' || prmOm.pn == 'dr' || prmOm.pn == 'ef' || prmOm.pn == 'av' || prmOm.pn == 'aw' || prmOm.pn == 'op' || prmOm.pn == 'bl' || prmOm.pn == 'ms' || prmOm.pn == 'ea' || prmOm.pn == 'og' || prmOm.pn == 'po' || prmOm.pn == 'mi' || prmOm.pn == 'pc' || prmOm.pn == 'ma' || prmOm.pn == 'kb' || prmOm.pn == 'ot' || prmOm.sectiontype == 'shoppingcart') {
		prmOm.siteType = 'Default';
	} else {
		prmOm.siteType = kaspersky.siteType || kaspersky.sitetype || '[NULL]';
	}
	prmOm.sAccountLive = 'kaspersky-single-suite';
	prmOm.sAccountStaging = 'kaspersky-single-suite-dev';
} else if (prmOm.pn == 'pp' || prmOm.pn == 'ap') {
	prmOm.downloadRegexp = /.{10000}/i;
	prmOm.downloadHrefRegexp = /.{10000}/i;
	prmOm.siteRegexp = /kasperskyhub\.com|kaspersky-partners\.ru|kasperskypartner\.de|kasperskypartners\.eu|portal\.kasperskyamericas\.com|kaspersky\.portal\.relayware\.com|kasperskypartners\.com|kasperskypartners\.ru|empartner\.kaspersky\.com|kasperskylab\.portal\.relayware\.com|secure\.avangate\.com/i;
	prmOm.siteType = 'Default';
	prmOm.saleButtonRegexp = /.{10000}/i;
	prmOm.scRegexp = /secure\.avangate\.com/i;
	prmOm.sAccountLive = 'kaspersky-single-suite,kaspersky-partnerportal';
	prmOm.sAccountStaging = 'kaspersky-single-suite-dev';
} else {
	prmOm.sAccountLive = 'kaspersky-single-suite';
	prmOm.sAccountStaging = 'kaspersky-single-suite-dev';
}

prmOm.storeRegexp = /app\.appsflyer\.com|itunes\.apple\.com|play\.google\.com|go\.onelink\.me|windowsphone\.com|softonic\.com/i;
prmOm.stagingRegexp = /master-|staging|developer([-\d])|drhadmin|hqcms|stg-|drh-|msk\d-|fr\d-|tridi|appdev|ws\.us|upaldev|stage\.|stage-|legacy-|\.kaspersky-labs\.com|\.drextenv\.net|\inactive\.digit|dev-|gc2-/i;

prmOm.trackingServer = 'kaspersky.d3.sc.omtrdc.net';
prmOm.trackingServerSecure = 'kaspersky.d3.sc.omtrdc.net';

prmOm.cookieDomain = omChooseCookieDomain();
prmOm.cookieDomainPeriods = prmOm.cookieDomain.split('.').length - 1;

prmOm.prevUrl = document.location.href.toLowerCase();

if (((typeof kaspersky.isStaging == 'undefined' && typeof kaspersky.testmode == 'undefined') || ((typeof kaspersky.isStaging != 'undefined' || typeof kaspersky.testmode != 'undefined') && prmOm.isStaging == 0) || (typeof kaspersky.hotfixLrcProxy != 'undefined' && kaspersky.hotfixLrcProxy == 1)) && document.location.hostname && document.location.hostname.search(prmOm.stagingRegexp) == -1) {
	prmOm.account = prmOm.sAccountLive; // TODO Safe condition
} else {
	prmOm.account = prmOm.sAccountStaging;
}

// TODO Remove

kaspersky.pages = {'ShoppingCart':'Shopping Cart','OptInAutoRenew':'AR Conditions','BillingInformation':'Billing Details','PaymentInformation':'Payment Details','ShippingInformation':'Shipping Details','BuyerVAT':'VAT','BuyerVATNumber':'VAT','VAT Exemption Registration':'VAT','ConfirmOrder':'Payment Confirmation','ThankYou':'Thank You','UnableToProcessOrder':'Error',
	'Customer Details':'Billing Details','Order Confirmation':'Thank You','EmptyShoppingCart':'Empty Shopping Cart','TaxInfoPopupPage':'Tax Info Popup'}; // TODO Remove

/* Legacy Tracking */

function trackKLReferrer() {}
function trackTrialSubmit() {}
function trackFraud() {}
function getFilename(url) {}
function trackFile() {}
function trackTrial() {}
function trackTrialKMS() {}
function trackPU() {}
function trackPU2() {}
function trackDoc() {}
function trackBeta() {}
function trackDBUpdate() {}
function trackDRFile() {}
function trackLink() {}
function trackCountrySelector() {}
function trackLRC() {}

function trackIPP(screen) {
	var tmpOm = {};
	tmpOm.debugTrace = s.apl(tmpOm.debugTrace, 'trackIPP', ' > ', 0);
	trackPage(screen);
}

function trackPage(screen) {
	var tmpOm = {};
	var tmppagename;
	tmpOm.debugTrace = s.apl(tmpOm.debugTrace, 'trackPage', ' > ', 0);
	tmppagename = kaspersky.pages[screen] ? kaspersky.pages[screen] : screen;
	trackPageView(tmppagename);
}

function trackMaxymiser(t) {
	var tmpOm = {};
	tmpOm.eVar37 = t;
	tmpOm.debugTrace = s.apl(tmpOm.debugTrace, 'trackMaxymiser', ' > ', 0);
	trackEvent('Maximizer', null, tmpOm);
}

/* Tracking */
	
function trackCroSegment(segmentName) {
	if (prmOm.siteType != 'IFrame') {
		var tmpOm = {};
		tmpOm.eVar37 = segmentName;
		tmpOm.debugTrace = s.apl(tmpOm.debugTrace, 'trackCroSegment', ' > ', 0);
		trackEvent('CRO Segment', null, tmpOm);
	}
}

function trackCta(ctaHref, ctaName, clickType, tmpOm, omIframe) {
	if (prmOm.siteType != 'IFrame') {
		var tmpOm = tmpOm || {};
		var omIframe = omIframe || {};
		var tmpContext = {};
		clickType = clickType || '[NULL]';
		tmpOm.prop68 = ctaName;
		tmpOm.eVar68 = 'D=c68';
		tmpOm.eVar71 = 'v1:CTA:{"ct":' + clickType + '}';
		tmpOm.eVar80 = omRemoveUrlParameter(ctaHref, '_ga');
		tmpOm.debugTrace = s.apl(tmpOm.debugTrace, 'trackCta', ' > ', 0);
		tmpContext = omSetContext(omIframe);
		tmpOm = omSetOmnitureParameters(tmpOm, 'o', tmpContext);
		s.tl(true, 'o', '', tmpOm);
	} else {
		if (typeof JSON == 'object' && typeof JSON.stringify == 'function') {
			var omPostMessage = {};
			var myKasperskyId = '';
			if (typeof window.dataLayer != 'undefined' && typeof window.dataLayer[0] != 'undefined' && typeof window.dataLayer[0].userID != 'undefined') myKasperskyId = window.dataLayer[0].userID;
			omPostMessage.pageName = kaspersky.pageName || '[NULL]';
			omPostMessage.ctaHref = ctaHref || '[NULL]';
			omPostMessage.ctaName = ctaName || '[NULL]';
			omPostMessage.clickType = clickType || '[NULL]';
			omPostMessage.myKasperskyId = kaspersky.myKasperskyId || myKasperskyId || '';
			omPostMessage.sender = 'Omniture';
			omPostMessage.eventKey = 'trackCta';
			omPostMessage.debugTrace = 'trackCta';
			top.postMessage(JSON.stringify(omPostMessage), '*');
		}
	}
}

function trackDownload(downloadHref, downloadType, clickType, tmpOm, omIframe) {
	if (prmOm.siteType != 'IFrame') {
		var tmpOm = tmpOm || {};
		var omIframe = omIframe || {};
		var tmpContext = {};
		var downloadHost = omGetHostName(downloadHref);
		if (downloadHref && downloadHost && (downloadHost.search(prmOm.downloadRegexp) != -1 || downloadHref.search(prmOm.downloadHrefRegexp) != -1)) {
			downloadHref = removeHashFromString(omRemoveAllUrlParametersForDownloads(downloadHref));
			if (/Free Download$/.test(kaspersky.pageName)) {
				downloadType = 'Free Builds';
			} else if (downloadType == 'TrialBuilds') {
				downloadType = 'Trial Builds';
			} else if (downloadType == 'UpdateBuilds') {
				downloadType = 'Update Builds';
			} else {
				downloadType = '[NULL]';
			}
			clickType = clickType || '[NULL]';
			tmpOm.eVar7 = downloadHref;
			tmpOm.eVar71 = 'v1:Download:{"ct":' + clickType + '}{"dt":' + downloadType + '}';
			tmpOm.eVar80 = downloadHref;
			tmpOm.debugTrace = s.apl(tmpOm.debugTrace, 'trackDownload', ' > ', 0);
			tmpContext = omSetContext(omIframe);
			tmpOm = omSetOmnitureParameters(tmpOm, 'd', tmpContext);
			s.tl(true, 'd', downloadHref, tmpOm);
		}
	} else {
		if (typeof JSON == 'object' && typeof JSON.stringify == 'function') {
			var omPostMessage = {};
			var myKasperskyId = '';
			if (typeof window.dataLayer != 'undefined' && typeof window.dataLayer[0] != 'undefined' && typeof window.dataLayer[0].userID != 'undefined') myKasperskyId = window.dataLayer[0].userID;
			omPostMessage.pageName = kaspersky.pageName || '[NULL]';
			omPostMessage.downloadHref = downloadHref || '[NULL]';
			omPostMessage.downloadType = downloadType || '[NULL]';
			omPostMessage.clickType = clickType || '[NULL]';
			omPostMessage.myKasperskyId = kaspersky.myKasperskyId || myKasperskyId || '';
			omPostMessage.sender = 'Omniture';
			omPostMessage.eventKey = 'trackDownload';
			omPostMessage.debugTrace = 'trackDownload';
			top.postMessage(JSON.stringify(omPostMessage), '*');
		}
	}
}

function trackEvent(name, parametersObj, tmpOm, omIframe) {
	if (prmOm.siteType != 'IFrame') {
		var tmpOm = tmpOm || {};
		var omIframe = omIframe || {};
		var tmpContext = {};
		parametersObj = parametersObj || '{}';
		if (typeof JSON == 'object' && typeof JSON.stringify == 'function') {
			tmpOm.eVar71 = 'v1:' + name + ':' + JSON.stringify(parametersObj);
		} else {
			tmpOm.eVar71 = 'v1:' + name + ':[ERROR]';
		}
		tmpOm.debugTrace = s.apl(tmpOm.debugTrace, 'trackEvent', ' > ', 0);
		tmpContext = omSetContext(omIframe);
		tmpOm = omSetOmnitureParameters(tmpOm, 'o', tmpContext);
		s.tl(true, 'o', '', tmpOm);
	} else {
		// TODO
	}
}

function trackExit(exitHref, clickType, tmpOm, omIframe) {
	if (prmOm.siteType != 'IFrame') {
		if (typeof exitHref != 'object') {
			var tmpOm = tmpOm || {};
			var omIframe = omIframe || {};
			var tmpContext = {};
			var processedHref = '';
			var exitHost = omGetHostName(exitHref);
			clickType = clickType || '[NULL]';
			tmpOm.eVar71 = 'v1:Exit:{"ct":' + clickType + '}';
			tmpOm.eVar80 = omRemoveUrlParameter(exitHref, '_ga');
			if (exitHost && exitHost.search(prmOm.siteRegexp) == -1 && exitHost.search(prmOm.storeRegexp) != -1) {
				processedHref = removeHashFromString(omRemoveUrlParameter(omRemoveUrlParameter(omRemoveUrlParameter(exitHref, 'pid'), 'c'), '_ga'));
				tmpOm.productName = tmpOm.dataOmnitureProductName || processedHref || '[NULL]';
			}
			tmpOm.debugTrace = s.apl(tmpOm.debugTrace, 'trackExit', ' > ', 0);
			tmpContext = omSetContext(omIframe);
			tmpOm = omSetOmnitureParameters(tmpOm, 'e', tmpContext);
			s.tl(true, 'e', exitHref, tmpOm);
		}
	} else {
		if (typeof JSON == 'object' && typeof JSON.stringify == 'function') {
			var omPostMessage = {};
			var myKasperskyId = '';
			if (typeof window.dataLayer != 'undefined' && typeof window.dataLayer[0] != 'undefined' && typeof window.dataLayer[0].userID != 'undefined') myKasperskyId = window.dataLayer[0].userID;
			omPostMessage.pageName = kaspersky.pageName || '[NULL]';
			omPostMessage.exitHref = exitHref || '[NULL]';
			omPostMessage.clickType = clickType || '[NULL]';
			omPostMessage.myKasperskyId = kaspersky.myKasperskyId || myKasperskyId || '';
			omPostMessage.sender = 'Omniture';
			omPostMessage.eventKey = 'trackExit';
			omPostMessage.debugTrace = 'trackExit';
			top.postMessage(JSON.stringify(omPostMessage), '*');
		}
	}
}

function trackGoToPayment(paymentMethod) {
	var tmpOm = {};
	var paymentMethod = paymentMethod || '[NULL]';
	tmpOm.debugTrace = s.apl(tmpOm.debugTrace, 'trackGoToPayment', ' > ', 0);
	trackEvent('Go To Payment', {"pm": paymentMethod}, tmpOm);
}

function trackChangePaymentMethod(paymentMethod) {
	var tmpOm = {};
	paymentMethod = paymentMethod ? paymentMethod : '[NULL]';
	tmpOm.debugTrace = s.apl(tmpOm.debugTrace, 'trackChangePaymentMethod', ' > ', 0);
	trackEvent('Change Payment Method', {"pm": paymentMethod}, tmpOm);
}

function trackLena(type, value) {
	var tmpOm = {};
	if (type == 'open') {
		tmpOm.eVar58 = value;
		tmpOm.debugTrace = s.apl(tmpOm.debugTrace, 'trackLena', ' > ', 0);
		trackEvent('Virtual Agent > Lena Chat Open', null, tmpOm);
	} else if (type == 'maximize') {
		tmpOm.debugTrace = s.apl(tmpOm.debugTrace, 'trackLena', ' > ', 0);
		trackEvent('Virtual Agent > Lena Chat Maximize', null, tmpOm);
	} else if (type == 'question') {
		if (s.getValOnce(1, 'event37', 1) == '1') {
			// s.events = 'event37'; // TODO CHECK
			tmpOm.debugTrace = s.apl(tmpOm.debugTrace, 'trackLena', ' > ', 0);
			trackEvent('Virtual Agent > Lena Chat Asking', null, tmpOm);
		}
	}
}

function trackPageView(pageName, tmpOm, omIframe) {
	if (prmOm.siteType != 'IFrame') {
		var tmpOm = tmpOm || {};
		var omIframe = omIframe || {};
		var tmpContext = {};
		/*
		if (omReadCookie('omTrackPageViewStartTime') != null) {
			tmpOm.notSentJson = s.apl(tmpOm.notSentJson, '"t2":' + omReadCookie('omTrackPageViewStartTime'), ', ', 1);
			omSetCookie('omNotSentJson', tmpOm.notSentJson, 1000);
		}
		tmpOm.trackPageViewStartTime = new Date().getTime();
		omSetCookie('omTrackPageViewStartTime', tmpOm.trackPageViewStartTime, 1000);
		*/
		if (pageName == null || pageName == '') pageName = '[NULL]';
		tmpOm.trackPageViewPageName = pageName;
		tmpOm.debugTrace = s.apl(tmpOm.debugTrace, 'trackPageView', ' > ', 0);
		tmpContext = omSetContext(omIframe);
		tmpOm = omSetOmnitureParameters(tmpOm, 'p', tmpContext);
		s.t(tmpOm);
		if (tmpContext.orderId && tmpContext.omNewOrders != tmpContext.omCurrentOrders) omSetCookie('omOrders', tmpContext.omNewOrders, 1000);
		if (tmpContext.orderId && !tmpContext.isDuplicatedOrder && tmpContext.coAffiliateName) omCpaCallback(tmpContext);
		/*
		tmpOm.trackPageViewEndTime = new Date().getTime();
		console.log('OMNITURE: trackPageView = ' + (tmpOm.trackPageViewEndTime - tmpOm.trackPageViewStartTime) + ' ms');
		console.log('OMNITURE: trackPageViewSinceJsInit = ' + (tmpOm.trackPageViewStartTime - prmOm.jsInitStartTime) + ' ms');
		omRemoveCookie('omTrackPageViewStartTime');
		omRemoveCookie('omNotSentJson');
		*/
	} else {
		if (typeof JSON == 'object' && typeof JSON.stringify == 'function') {
			var omPostMessage = {};
			var myKasperskyId = '';
			if (typeof window.dataLayer != 'undefined' && typeof window.dataLayer[0] != 'undefined' && typeof window.dataLayer[0].userID != 'undefined') myKasperskyId = window.dataLayer[0].userID;
			omPostMessage.trackPageViewPageName = pageName || '[NULL]';
			omPostMessage.myKasperskyId = kaspersky.myKasperskyId || myKasperskyId || '';
			omPostMessage.sender = 'Omniture';
			omPostMessage.eventKey = 'trackPageView';
			omPostMessage.debugTrace = 'trackPageView';
			top.postMessage(JSON.stringify(omPostMessage), '*');
		}
	}
}

function trackRegistration(type, tmpOm, omIframe) {
	if (prmOm.siteType != 'IFrame') {
		var tmpOm = tmpOm || {};
		var omIframe = omIframe || {};
		var tmpContext = {};
		tmpOm.eVar71 = 'v1:Registration:{"st":' + type + '}';
		tmpOm.debugTrace = s.apl(tmpOm.debugTrace, 'trackRegistration', ' > ', 0);
		tmpContext = omSetContext(omIframe);
		tmpOm = omSetOmnitureParameters(tmpOm, 'o', tmpContext);
		s.tl(true, 'o', '', tmpOm);
	} else {
		if (typeof JSON == 'object' && typeof JSON.stringify == 'function') {
			var omPostMessage = {};
			var myKasperskyId = '';
			if (typeof window.dataLayer != 'undefined' && typeof window.dataLayer[0] != 'undefined' && typeof window.dataLayer[0].userID != 'undefined') myKasperskyId = window.dataLayer[0].userID;
			omPostMessage.pageName = kaspersky.pageName || '[NULL]';
			omPostMessage.type = type || '[NULL]';
			omPostMessage.myKasperskyId = kaspersky.myKasperskyId || myKasperskyId || '';
			omPostMessage.sender = 'Omniture';
			omPostMessage.eventKey = 'trackRegistration';
			omPostMessage.debugTrace = 'trackRegistration';
			top.postMessage(JSON.stringify(omPostMessage), '*');
		}
	}
}

function trackSaleButton(saleButtonHref, saleButtonName, clickType, tmpOm) {
	if (prmOm.siteType != 'IFrame') {
		var tmpOm = tmpOm || {};
		var omIframe = omIframe || {};
		var tmpContext = {};
		var saleButtonHost = omGetHostName(saleButtonHref);
		clickType = clickType || '[NULL]';
		saleButtonHref = omRemoveUrlParameter(saleButtonHref, '_ga');
		if (saleButtonName || (saleButtonHref && saleButtonHost && saleButtonHref.search(prmOm.saleButtonRegexp) != -1)) {
			if (saleButtonName == '') saleButtonName = '[NULL]';
			tmpOm.eVar71 = 'v1:Transition To Shopping Cart:{"ct":' + clickType + '}{"sbt":' + saleButtonName + '}';
			tmpOm.eVar80 = saleButtonHref || '[NULL]';
			tmpOm.productName = tmpOm.dataOmnitureProductName || '[NULL]';
			tmpOm.debugTrace = s.apl(tmpOm.debugTrace, 'trackSaleButton', ' > ', 0);
			tmpContext = omSetContext(omIframe);
			tmpOm = omSetOmnitureParameters(tmpOm, 'o', tmpContext);
			s.tl(true, 'o', '', tmpOm);
		}
	} else {
		// TODO
	}
}

function trackSignin(type) { // TODO Remove legacy
	trackSignIn(type);
}

function trackSignIn(type, tmpOm, omIframe) {
	if (prmOm.siteType != 'IFrame') {
		var tmpOm = tmpOm || {};
		var omIframe = omIframe || {};
		var tmpContext = {};
		tmpOm.eVar71 = 'v1:Sign In:{"st":' + type + '}';
		tmpOm.debugTrace = s.apl(tmpOm.debugTrace, 'trackSignIn', ' > ', 0);
		tmpContext = omSetContext(omIframe);
		tmpOm = omSetOmnitureParameters(tmpOm, 'o', tmpContext);
		s.tl(true, 'o', '', tmpOm);
	} else {
		if (typeof JSON == 'object' && typeof JSON.stringify == 'function') {
			var omPostMessage = {};
			var myKasperskyId = '';
			if (typeof window.dataLayer != 'undefined' && typeof window.dataLayer[0] != 'undefined' && typeof window.dataLayer[0].userID != 'undefined') myKasperskyId = window.dataLayer[0].userID;
			omPostMessage.pageName = kaspersky.pageName || '[NULL]';
			omPostMessage.type = type || '[NULL]';
			omPostMessage.myKasperskyId = kaspersky.myKasperskyId || myKasperskyId || '';
			omPostMessage.sender = 'Omniture';
			omPostMessage.eventKey = 'trackSignIn';
			omPostMessage.debugTrace = 'trackSignIn';
			top.postMessage(JSON.stringify(omPostMessage), '*');
		}
	}
}

function trackUpsellPage(upsellValue) {
	if (prmOm.siteType != 'IFrame') {
		var tmpOm = {};
		tmpOm.prop12 = upsellValue;
		tmpOm.debugTrace = s.apl(tmpOm.debugTrace, 'trackUpsellPage', ' > ', 0);
		trackEvent('Upsell > Accepted', '{ups:' + upsellValue + '}', null, tmpOm);
	} else {
		// TODO Not need?
	}
}

/* Object */

function omSetContext(omIframe) {
		
	var object = {};
	var productsOnlyArrayParsed = [];
	var productsArrayParsed = [];
	var omIframe = omIframe || {};
	var tmpCampaign;

	object.omIframeSender = omIframe.sender || '';
	
	// Init
	
	if (kaspersky._isProxying) {
		object._isProxying = true;
		kaspersky._isProxying = false;
	}
	
	object.account = kaspersky.account || '';
	object.cartId = kaspersky.cartId || kaspersky.cartid || '';
	object.couponCode = kaspersky.couponCode || kaspersky.couponcode || '';
	object.currencyCode = kaspersky.currency || 'USD';
	object.errorCode = kaspersky.errorCode || kaspersky.error || '';
	object.events = kaspersky.events || '';
	object.locale = kaspersky.locale || ''; // TODO Remove Legacy
	object.microStore = kaspersky.microStore || kaspersky.microstore || '';
	object.myKasperskyId = omIframe.myKasperskyId || kaspersky.myKasperskyId || '';
	object.offerId = kaspersky.offerId || kaspersky.offerid || '';
	object.orderId = kaspersky.orderId || kaspersky.orderid || '';
	object.orderLevelDiscount = kaspersky.orderLevelDiscount || kaspersky.orderleveldiscount || '';
	object.pageName = kaspersky.pageName || kaspersky.pagename || '[NULL]';
	object.pageCharset = kaspersky.pageCharset || kaspersky.pagecharset || '[NULL]';
	object.pageLocale = kaspersky.pageLocale || '';
	object.pageType = kaspersky.pageType || '';
	object.partnerId = kaspersky.partnerId || '';
	object.paymentMethod = kaspersky.paymentMethod || kaspersky.paymentmethod || '';
	object.platformVersion = (kaspersky.version && kaspersky.version.rev) ? kaspersky.version.rev || '[NULL]' : kaspersky.version || kaspersky.platformVersion || '[NULL]';
	object.products = kaspersky.products || '';
	object.serialNumber = kaspersky.serialNumber || '';
	object.verdictLicenseProduct = kaspersky.verdictLicenseProduct || '';
	object.verdictLicenseType = kaspersky.verdictLicenseType || '';
	object.verdictSite = kaspersky.verdictSite || '';
	object.verdictString = kaspersky.verdictString || '';
	object.searchQuery = kaspersky.searchQuery || '';
	if (kaspersky.searchTotalResults === 0) {
		object.searchTotalResults = 'No results';
	} else if (object.searchQuery != '') {
		object.searchTotalResults = kaspersky.searchTotalResults || '[NULL]';
	} else {
		object.searchTotalResults = '';
	}
	object.siteLocale = (kaspersky.siteLocale || '').toLowerCase();
	object.siteRegion = prmOm.siteRegion || kaspersky.siteRegion || '';
	object.state = kaspersky.state || '';
	object.themeId = kaspersky.themeId || kaspersky.theme || kaspersky.designtemplate || '';
	object.totalOrderAmountWoVat = kaspersky.totalorderamountwovat || '';
	object.totalOrderAmount = kaspersky.totalorderamount || '';
	object.vatAmount = kaspersky.vatamount || '';
	object.referrer = kaspersky.referrer || ''; // TODO Add parsing of the URL
	object.zip = kaspersky.zip || '';
	
	// eComm

	if (prmOm.pn == 'dr' || prmOm.pn == 'ef' || prmOm.pn == 'av' || prmOm.pn == 'nw' || prmOm.pn == 'as') {
		object.account = kaspersky.account || '[NULL]';
		if (object.cartId != '') {
			object.cartId = prmOm.eCommProviderChars + '-' + object.cartId;
		} else {
			object.cartId = '[NULL]';
		}
	}
	
	// Purchase fixes and deduplication
	
	if (object.orderId || object.events == 'purchase') {
		object.omCurrentOrders = omReadCookie('omOrders') || '';
		if (object.orderId != '') {
			object.orderId = prmOm.eCommProviderChars + '-' + object.orderId;
		} else {
			object.orderId = prmOm.eCommProviderChars + '-[NULL]';
		}
		if (object.orderId) object.omNewOrders = s.apl(object.omCurrentOrders, object.orderId, ',', 1);
		if (object.omNewOrders != object.omCurrentOrders) {
			object.isDuplicatedOrder = false;
			if (object.events != 'purchase') object.prop20 = '[ERROR] events is not equal to "purchase"';
			object.offerId = kaspersky.offerId || kaspersky.offerid || '';
			object.paymentMethod = kaspersky.paymentMethod || kaspersky.paymentmethod || '[NULL]';
			
			// Required for triggering CPA callbacks
			object.coCampaign30 = omReadCookie('omCampaign30') || '';
			object.coCampaign30Array = object.coCampaign30.split('_');
			if (object.coCampaign30.indexOf('tcid_admitad_') == 0) {
				object.coAffiliateName = 'Admitad';
				object.coAid = object.coCampaign30Array[3] || '[NULL]';
				object.coAdmitadUid = object.coCampaign30Array[2] || '[NULL]';
			} else if (object.coCampaign30Array.indexOf('tcid_actionpay_') == 0) {
				object.coAffiliateName = 'Actionpay';
				object.coAid = object.coCampaign30Array[2] || '[NULL]';
			}
		} else {
			object.isDuplicatedOrder = true;
			object.events = '';
			object.orderId = '';
			object.paymentMethod = '';
			object.products = '';
			object.offerId = '';
			object.couponCode = '';
			object.zip = '';
			object.state = '';
		}
	}
	
	if (prmOm.pn == 'dr' || prmOm.pn == 'nw') {
		object.siteLocale = object.siteLocale || object.locale.replace('_', '-') || '[NULL]'; // TODO Legacy
	} else if (prmOm.pn == 'av' || prmOm.pn == 'aw') {
		object.siteLocale = object.siteLocale || object.locale || '[NULL]'; // TODO Legacy;
	} else if (prmOm.pn == 'as') {
		object.siteLocale = object.locale || '[NULL]'; // TODO Legacy;
	} else {
		object.siteLocale = object.siteLocale || '[NULL]';
	}
	
	if (prmOm.pn == 'dr' || prmOm.pn == 'ef' || prmOm.pn == 'av' || prmOm.pn == 'nw' || prmOm.pn == 'as') {
		object.themeId = object.themeId || '[NULL]';
	}
	
	// Products
	
	object.products = object.products.replace(' ', ''); // HOTFIX
	
	if (object.products && object.products != '') {
		object.productsArray = object.products.split(',');
		for (var i = 0; i < object.productsArray.length; i++) {
			productsOnlyArrayParsed.push(object.productsArray[i].replace(/^[^;]*;([^;]+);.+$/, prmOm.eCommProviderChars + '-$1'));
			productsArrayParsed.push(object.productsArray[i].replace(/^([^;]*);([^;]+);(.+)$/, '$1;' + prmOm.eCommProviderChars + '-$2;$3'));
		}
		object.productsOnlyStr = productsOnlyArrayParsed.join(',');
		object.productsStr = productsArrayParsed.join(',');
		object.products = object.productsStr;
	} else {
		object.productsOnlyStr = '';
		object.productsStr = '';
		object.products = '';
	}
	
	// Get Parameters

	object.inpev = omGetQueryParam('inpev') || '';
	
	object.prevInp = decodeURIComponent(omGetQueryParam('prev-inp') || '');
	
	object.bid = decodeURIComponent(omGetQueryParam('bid') || '');
	object.aid = decodeURIComponent(omGetQueryParam('aid') || '');
	object.pid = decodeURIComponent(omGetQueryParam('pid') || '');
	
	object.gpWithSpage = (decodeURIComponent(omGetQueryParam('spage') || omGetQueryParam('ADDITIONAL_spage') || omGetQueryParam('referer6') || '')) ? true : false;
		
	tmpCampaign = omGetQueryParam('campaign') || omGetQueryParam('affiliate') || omGetQueryParam('reseller') || omGetQueryParam('typnews') || omGetQueryParam('omcampaign') || omGetQueryParam('ADDITIONAL_reseller') || omGetQueryParam('cid') || omGetQueryParam('c_id') || omGetQueryParam('referer2') || '';
	
	if (!object.gpWithSpage) {
		
		object.campaign = tmpCampaign;
		
		if (object.campaign) omSetCookie('omCampaign30', object.campaign, 30);

		object.campaignArray = object.campaign.split('_');
		
		if (object.campaign == '') {
			object.kenshooProfileId = decodeURIComponent(omGetQueryParam('ksprof_id') || '');
			object.kenshooKeyword = decodeURIComponent(omGetQueryParam('ksaffcode') || '');
			object.kenshooDevice = decodeURIComponent(omGetQueryParam('ksdevice') || '');
			object.kenshooClickId = decodeURIComponent(omGetQueryParam('ksid') || '');
			object.kenshooAdId = decodeURIComponent(omGetQueryParam('kschadid') || '');
			object.kenshooChannelName = decodeURIComponent(omGetQueryParam('kschname') || '');
			
			if (object.kenshooProfileId != '' || object.kenshooKeyword != '' || object.kenshooDevice != '' || object.kenshooClickId != '' || object.kenshooAdId != '' || object.kenshooChannelName != '') {
				object.campaign = 'KSHOO_' + object.kenshooProfileId + '_' + object.kenshooKeyword + '_' + object.kenshooDevice + '_' + object.kenshooAdId + '_' + object.kenshooChannelName;
			}
		}
	
		object.gpAffiliate = omGetQueryParam('affiliate') || '';
		object.gpReseller = omGetQueryParam('reseller') || '';
		object.gpTypnews = omGetQueryParam('typnews') || '';
		object.gpCjPid = decodeURIComponent(omGetQueryParam('CJ_PID') || '');
		object.gpOndAffiliateId = decodeURIComponent(omGetQueryParam('ond_affiliate_id') || '');
		object.gpAdmitadAid = decodeURIComponent(omGetQueryParam('admitad_aid') || '');
		object.gpAdmitadUid = decodeURIComponent(omGetQueryParam('admitad_uid') || '');
		object.gpAvgAffiliate = decodeURIComponent(omGetQueryParam('avgaffiliate') || '');
		
		if (object.gpAffiliate == 'oND_NAM' || object.gpAffiliate == 'oND' || object.gpReseller == 'oND_NAM' || object.gpReseller == 'oND' || object.gpAffiliate.indexOf('DRaff_oND_') == 0 || object.gpReseller.indexOf('DRaff_oND_') == 0) {
			object.isAffiliate = true;
			object.affiliateName = 'oND';
			object.aid = object.gpOndAffiliateId || object.aid || '[NULL]';
			object.pid = object.pid || '[NULL]';
		} else if (object.gpReseller.indexOf('Affiliation_CJ_') == 0 || object.gpTypnews.indexOf('Affiliation_CJ_') == 0 || object.gpReseller.indexOf('DRAff_CJ_') == 0 || object.gpAffiliate.indexOf('DRAff_CJ_') == 0 || object.gpAffiliate == 'CJ_COM' || object.gpAffiliate == 'CJ_NAM' || object.gpTypnews == 'CJ_COM' || object.gpTypnews == 'CJ_NAM' || object.gpCjPid != '') {
			object.isAffiliate = true;
			object.affiliateName = 'CJ';
			object.pid = object.pid || object.gpCjPid || '[NULL]';
		} else if (object.campaign.indexOf('tcid_admitad_') == 0) {
			object.isAffiliate = true;
			object.affiliateName = 'Admitad';
			object.aid = object.campaignArray[3] || '[NULL]';
			object.admitadUid = object.campaignArray[2] || '[NULL]';
			if (object.admitadUid) omSetCookie('admitad_uid', object.admitadUid, 30);
		} else if (object.gpAdmitadAid != '') {
			object.isAffiliate = true;
			object.affiliateName = 'Admitad';
			object.aid = object.gpAdmitadAid;
			if (object.gpAdmitadUid) omSetCookie('admitad_uid', object.gpAdmitadUid, 30);
		} else if (object.campaign.indexOf('tcid_actionpay_') == 0) {
			object.isAffiliate = true;
			object.affiliateName = 'Actionpay';
			object.aid = object.campaignArray[3] || '[NULL]';
		} else if (object.gpAvgAffiliate != '') {
			object.isAffiliate = true;
			object.affiliateName = 'Avangate';
			object.pid = object.gpAvgAffiliate;
		} else {
			object.isAffiliate = false;
		}
		
	} else {
		if (tmpCampaign && (object.siteLocale == 'en-ae' || object.siteLocale == 'ar-ae' || object.siteLocale == 'tr-tr' || object.account == 'ME' || object.account == 'TR')) omSetCookie('omCampaign30', tmpCampaign, 30); // Exclusion for missmatching domains
		object.campaign = '';
		object.isAffiliate = false;
	}

	object.gpUtmSource = decodeURIComponent(omGetQueryParam('utm_source') || '');
	object.gpUtmMedium = decodeURIComponent(omGetQueryParam('utm_medium') || '');
	object.gpUtmCampaign = decodeURIComponent(omGetQueryParam('utm_campaign') || '');
	object.gpUtmTerm = decodeURIComponent(omGetQueryParam('utm_term') || '');
	object.gpUtmContent = decodeURIComponent(omGetQueryParam('utm_content') || '');
	
	if (object.gpUtmSource || object.gpUtmMedium || object.gpUtmCampaign || object.gpUtmTerm || object.gpUtmContent) {
		object.hasUtm = true;
		object.gpUtmSource = object.gpUtmSource || '[NULL]';
		object.gpUtmMedium = object.gpUtmMedium || '[NULL]';
		object.gpUtmCampaign = object.gpUtmCampaign || '[NULL]';
		object.gpUtmTerm = object.gpUtmTerm || '[NULL]';
		object.gpUtmContent = object.gpUtmContent || '[NULL]';
	} else {
		object.hasUtm = false;
	}
	
	if (object.campaign != '') {
		omSetCookie('omCampaign', object.campaign, 1000);
		omSetCookie('klcampaign', object.campaign, 1000);
	}
	
	object.croSegmentStr = decodeURIComponent(object.croSegment1 || omGetQueryParam('klab1') || '') + ':' + decodeURIComponent(object.croSegment2 || omGetQueryParam('klab2') || '') + ':' + decodeURIComponent(object.croSegment3 || omGetQueryParam('klab3') || '') + ':' + decodeURIComponent(object.croSegment4 || omGetQueryParam('klab4') || '') + ':' + decodeURIComponent(object.croSegment5 || omGetQueryParam('klab5') || '');
	
	// LRC
	
	if (kaspersky.hotfixLrcProxy == 1 && kaspersky.verdictString == '' && kaspersky.serialNumber != '') {
		object.isLrcOrAtt = true;
		object.verdict = '[NULL]';
		object.prop20 = 'hotfixLrcProxy';
		object.verdictSite = 'LRC';
	} else if (kaspersky.hotfixLrcProxy == 1 && kaspersky.verdictString != '') {
		object.isLrcOrAtt = true;
		var verdictUsaArray = /^([^_]+)_([^_]+)_([^_]+)_([^_]+)_([^_]+)_([0-9]+)[^_]+_([0-9]+)[^_]+_([^_]+)$/ig.exec(kaspersky.verdictString);
		object.verdictRegion = verdictUsaArray[1];
		object.verdictSite = verdictUsaArray[2];
		if (verdictUsaArray[4].indexOf('Undefined') != -1) {
			object.verdictPartner = '[NULL]';
		} else {
			object.verdictPartner = verdictUsaArray[4];
		}
		if (verdictUsaArray[3].indexOf('Undefined') != -1) {
			object.verdictChannel = '[NULL]';
		} else {
			object.verdictChannel = verdictUsaArray[3];
		}
		if (verdictUsaArray[5].indexOf('Undefined') != -1) {
			object.verdictLicenseProduct = '[NULL]';
		} else {
			object.verdictLicenseProduct = verdictUsaArray[5];
		}
		object.verdictDevices = verdictUsaArray[6];
		object.verdictTerm = verdictUsaArray[7];
		object.verdictSourceCase = (decodeURIComponent(omGetQueryParam('uni') || '') == '') ? 'REGULAR' : 'UNINSTALL';
		object.verdictLicenseStatus = verdictUsaArray[8].toUpperCase();
		object.eCommProvider = 'Digital River';
		object.serialNumber = object.serialNumber || omGetQueryParam('serial') || '[NULL]';
		object.serialNumber = object.serialNumber.toUpperCase() || '[NULL]';
		object.verdict = (object.verdictRegion + '_' + object.verdictSite + '_' + object.verdictPartner + '_' + object.verdictChannel + '_' + object.verdictLicenseProduct + '_' + object.verdictDevices + '_' + object.verdictTerm + '_' + object.verdictLicenseStatus + '_' + object.verdictSourceCase).toUpperCase();
		object.prop20 = 'hotfixLrcProxy';
	} else if (object.verdictLicenseProduct && object.verdictLicenseProduct != '' && object.verdictLicenseProduct != '[NULL]') {
		object.isLrcOrAtt = true;
		object.serialNumber = object.serialNumber || omGetQueryParam('serial') || '[NULL]';
		object.serialNumber = object.serialNumber.toUpperCase() || '[NULL]';
		if (object.verdictLicenseType.toUpperCase() != 'TRIAL' && object.verdictLicenseProduct.search(/^.+_T$/i) == -1) {
        	object.verdictSite = kaspersky.verdictSite || 'LRC';
		} else {
			object.verdictSite = 'ATT';
		}
		object.verdictPartNumber = kaspersky.verdictPartNumber || '[NULL]';
		if (typeof kaspersky.verdictRegion != 'undefined' && kaspersky.verdictRegion != '' && kaspersky.verdictRegion != '[NULL]') {
			object.verdictRegion = kaspersky.verdictRegion;
		} else if (object.siteLocale == 'en-global') {
			object.verdictRegion = 'GL';
		} else if (object.siteLocale == 'ru-ru') {
			object.verdictRegion = 'RU';
		} else if (object.siteLocale == 'en-us') {
			object.verdictRegion = 'US';
		} else if (object.siteLocale == 'en-gb') {
			object.verdictRegion = 'UK';
		} else if (object.siteLocale == 'pt-br') {
			object.verdictRegion = 'BR';
		} else if (object.siteLocale == 'fr-fr') {
			object.verdictRegion = 'FR';
		} else if (object.siteLocale == 'de-de') {
			object.verdictRegion = 'DE';
		} else if (object.siteLocale == 'it-it') {
			object.verdictRegion = 'IT';
		} else if (object.siteLocale == 'es-es') {
			object.verdictRegion = 'ES';
		} else if (object.siteLocale == 'nl-nl') {
			object.verdictRegion = 'NL';
		} else if (object.siteLocale == 'en-au') {
			object.verdictRegion = 'AU';
		} else if (object.siteLocale == 'en-ae') {
			object.verdictRegion = 'ME';
		} else if (object.siteLocale == 'ar-ae') {
			object.verdictRegion = 'ME';
		} else if (object.siteLocale == 'ja-jp') {
			object.verdictRegion = 'JP';
		} else if (object.siteLocale == 'en-in') {
			object.verdictRegion = 'IN';
		} else if (object.siteLocale == 'en-za') {
			object.verdictRegion = 'ZA';
		} else if (object.siteLocale == 'zh-cn') {
			object.verdictRegion = 'CN';
		} else if (object.siteLocale == 'tr-tr') {
			object.verdictRegion = 'TR';
		} else if (object.siteLocale == 'es-mx') {
			object.verdictRegion = 'LA';
		} else if (object.siteLocale == 'sv-se') {
			object.verdictRegion = 'SE';
		} else if (object.siteLocale == 'da-dk') {
			object.verdictRegion = 'DK';
		} else if (object.siteLocale == 'nb-no') {
			object.verdictRegion = 'NO';
		} else if (object.siteLocale == 'pl-pl') {
			object.verdictRegion = 'PL';
		} else {
			object.verdictRegion = '[NULL]';
		}
		object.verdictRegion = object.verdictRegion || '[NULL]';
		object.verdictChannel = kaspersky.verdictChannel || '[NULL]';
		// if (object.verdictChannel != 'Online' && object.verdictChannel != 'Retail') object.verdictChannel = '[NULL]';
		object.verdictPartner = kaspersky.verdictPartner || '[NULL]';
		object.verdictLicenseProduct = kaspersky.verdictLicenseProduct.split('_')[0] || '[NULL]'; // TODO Validate
		object.verdictDevices = kaspersky.verdictDevices || '[NULL]';
		object.verdictTerm = kaspersky.verdictTerm === 0 ? 0 : (kaspersky.verdictTerm || '[NULL]');
		object.verdictSourceCase = (decodeURIComponent(omGetQueryParam('uni') || '') == '') ? 'REGULAR' : 'UNINSTALL';
        if (kaspersky.verdictLicenseStatus == true) {
			object.verdictLicenseStatus = 'ACTIVE';
		} else if (kaspersky.verdictLicenseStatus == false) {
			object.verdictLicenseStatus = 'EXPIRED';
		}
		object.verdictLicenseStatus = object.verdictLicenseStatus || '[NULL]';
		object.verdict = (object.verdictRegion + '_' + object.verdictSite + '_' + object.verdictPartner + '_' + object.verdictChannel + '_' + object.verdictLicenseProduct + '_' + object.verdictDevices + '_' + object.verdictTerm + '_' + object.verdictLicenseStatus + '_' + object.verdictSourceCase).toUpperCase();
    }
	
	// Other Legacy & Hotfixes
	
	object.eVar37 = window.kaspersky_testid || kaspersky.eVar37 || '';
	
	if (prmOm.pn == 'pp' || prmOm.pn == 'ap') {
		object.siteRegion = object.siteRegion || '[NULL]';
	}
	
	return object;
	
}
	
function omSetOmnitureParameters(tmpOm, instanceType, tmpContext) {
		
	s.linkTrackVars = ''; // HOTFIX
	if (tmpContext._isProxying) tmpOm.debugTrace = 's.t Proxied > ' + tmpOm.debugTrace; // HOTFIX Proxying
	
	tmpOm.currencyCode = tmpContext.currencyCode;
		
	tmpOm.pageNameReal = tmpOm.trackPageViewPageName || tmpContext.pageName;
	// HOTFIX
	if (prmOm.pn == 'dr' || prmOm.pn == 'av' || prmOm.pn == 'nw') {
		if (kaspersky.ipp == 1 || kaspersky.sectiontype == 'IPP' || kaspersky.sectionType == 'IPP' || kaspersky.sectiontype == 'ipp' || kaspersky.sectionType == 'ipp') {
			tmpOm.pageNameReal = 'IPP > ' + tmpOm.pageNameReal;
		} else {
			if ((prmOm.pn == 'dr' && kaspersky.account != 'kasper' && kaspersky.account != 'kasperin') || prmOm.pn == 'av') tmpOm.pageNameReal = 'Shopping Cart > ' + tmpOm.pageNameReal;
		}
		if (tmpOm.pageNameReal == 'ThreePgCheckoutAddressPaymentInfoPage') tmpOm.pageNameReal = 'Shopping Cart > Billing Details';
		if (kaspersky.sectiontype && kaspersky.sectiontype == 'marketplace') {
			tmpOm.pageNameReal = 'Private Store > '+ tmpOm.pageNameReal.replace(/([a-z])([A-Z])/g, '$1 $2');
		}
		if (prmOm.pn == 'dr' && kaspersky.account != 'kasper' && kaspersky.account != 'kasperin') tmpOm.pageNameReal = omAddSpaces(tmpOm.pageNameReal);
	}
	tmpOm.pageNameReal = tmpOm.pageNameReal.replace('Shopping Cart > Shopping Cart > ', 'Shopping Cart > ');
	// /HOTFIX
	if ((tmpOm.pageNameReal.indexOf('Error') != -1 && tmpOm.pageNameReal.indexOf('404') != -1) || tmpContext.pageType == 'errorPage' || tmpContext.errorCode == 404) {
		tmpOm.pageName = '';
		tmpOm.pageType = 'errorPage';
		tmpOm.pageNameReal = (tmpOm.pageNameReal != '[NULL]') ? tmpOm.pageNameReal : 'Error Pages > 404';
	} else if (tmpContext.errorCode) {
		tmpOm.pageNameReal = 'Error Pages > ' + tmpContext.errorCode;
	} else {
		tmpOm.pageName = tmpOm.pageNameReal;
	}
	tmpOm.pageNameArray = tmpOm.pageNameReal.split(' > ');
	tmpOm.channel = tmpOm.pageNameArray[0];
	
	if (/o|e|d/.test(instanceType)) {
		// Current instance is s.tl
		if (tmpOm.isSalePage) tmpOm.eVar59 = tmpOm.pageNameReal;
		tmpOm.instanceType = instanceType;
		tmpOm.debugTrace = s.apl(tmpOm.debugTrace, 's.tl', ' > ', 0);
	} else if (instanceType == 'p') {
		// Current instance is s.t or Click Map (not in use)
		tmpOm.products = tmpContext.products || '';
		tmpOm.pageUrl = document.location.href;
		if (tmpOm.pageUrl.toLowerCase() != prmOm.prevUrl) {
			tmpOm.referrer = prmOm.prevUrl || tmpContext.referrer || document.referrer;
			prmOm.prevUrl = tmpOm.pageUrl.toLowerCase();
		} else {
			tmpOm.referrer = tmpContext.referrer || document.referrer;
		}
		tmpOm.campaign = tmpContext.campaign;
		tmpOm.prop5 = tmpContext.searchQuery;
		tmpOm.prop6 = tmpContext.searchTotalResults;
		if (tmpContext.isLrcOrAtt && tmpContext.verdictSite == 'LRC') {
			tmpOm.prop14 = tmpContext.verdict;
			tmpOm.prop15 = tmpContext.serialNumber;
			tmpOm.prop16 = 'D=c14+": "+c15';
		}
		if (tmpOm.campaign) tmpOm.prop17 = 'D=v0';
		if (tmpContext.isLrcOrAtt && tmpContext.verdictSite == 'ATT') {
			tmpOm.prop55 = tmpContext.verdict;
		}
		tmpOm.eVar4 = omGetQueryParam('icid');
		if (tmpOm.prop5) tmpOm.eVar5 = 'D=c5';
		tmpOm.eVar8 = omGetQueryParam('bid') || '';
		if (tmpContext.isAffiliate) {
			tmpOm.eVar13 = '{"af":' + tmpContext.affiliateName + '}';
			if (tmpContext.pid) tmpOm.eVar13 = tmpOm.eVar13 + '{"pid":' + tmpContext.pid + '}';
			if (tmpContext.aid) tmpOm.eVar13 = tmpOm.eVar13 + '{"aid":' + tmpContext.aid + '}';
			if (tmpContext.admitadUid) tmpOm.eVar13 = tmpOm.eVar13 + '{"admUid":' + tmpContext.admitadUid + '}';
		}
		if (tmpContext.isLrcOrAtt && tmpContext.verdictSite == 'LRC') {
			tmpOm.eVar14 = 'D=c14';
			tmpOm.eVar15 = 'D=c15';
			tmpOm.eVar16 = 'D=c14+": "+c15';
		}
		if (tmpOm.prop12) tmpOm.eVar18 = 'D=c12';
		if (!tmpOm.gpHasSpage) {
			tmpOm.eVar23 = decodeURIComponent((kaspersky['qs'] && kaspersky['qs']['aclid']) || omGetQueryParam('aclid') || '');
			tmpOm.eVar24 = decodeURIComponent((kaspersky['qs'] && kaspersky['qs']['acregion']) || omGetQueryParam('acregion') || '');
			tmpOm.eVar25 = decodeURIComponent((kaspersky['qs'] && kaspersky['qs']['acaid']) || omGetQueryParam('acaid') || '');
			tmpOm.eVar26 = decodeURIComponent((kaspersky['qs'] && kaspersky['qs']['acipmccid']) || omGetQueryParam('acipmccid') || '');
			tmpOm.eVar27 = decodeURIComponent((kaspersky['qs'] && kaspersky['qs']['acaiid']) || omGetQueryParam('acaiid') || '');
		}
		tmpOm.eVar35 = omRemoveUrlParameter(omRemoveUrlParameter(decodeURIComponent(tmpOm.referrer), '_ga'), 'mkt_tok'); // Due to filtering Referrer by internal filters
		tmpOm.eVar44 = 'D=v3';
		if (tmpContext.isLrcOrAtt && tmpContext.verdictSite == 'ATT') {
			tmpOm.eVar55 = 'D=c55';
		}
		if (typeof ClickTaleGetUID == 'function') {
			tmpOm.eVar60 = ClickTaleGetUID();
		}
		tmpOm.eVar67 = tmpContext.microStore;
		if (!tmpOm.gpHasSpage) {
			tmpOm.eVar69 = decodeURIComponent((kaspersky['qs'] && kaspersky['qs']['acmid']) || omGetQueryParam('acmid') || '');
			tmpOm.eVar70 = decodeURIComponent((kaspersky['qs'] && kaspersky['qs']['acbid']) || omGetQueryParam('acbid') || '');
		}
		tmpOm.eVar71 = 'v1:Page View:[NULL]';
		if (tmpOm.campaign) tmpOm.eVar73 = 'D=v0';
		if (tmpOm.campaign) tmpOm.eVar74 = 'D=v0';
		if (tmpContext.hasUtm) tmpOm.eVar86 = 'v1:' + tmpContext.gpUtmSource + ':' + tmpContext.gpUtmMedium + ':' + tmpContext.gpUtmCampaign + ':' + tmpContext.gpUtmTerm + ':' + tmpContext.gpUtmContent;
		tmpOm.instanceType = instanceType;
		tmpOm.debugTrace = s.apl(tmpOm.debugTrace, 's.t', ' > ', 0);
		tmpOm = omSetInp(tmpOm);
		
		// Purchase Event
		tmpOm.events = s.apl(tmpOm.events, tmpContext.events, ',', 1);
		s.events = tmpOm.events;
		tmpOm.events = s.getCartOpen('s_scOpen');
		s.events = tmpOm.events;
		tmpOm.events = s.resetGetCartOpen('s_scOpen');
		s.events = tmpOm.events;
		tmpOm.events = s.getCheckout('s_scCheckout');
		s.events = '';
		if (tmpContext.orderId && tmpContext.omIframeSender != 'Omniture') { // Exclude commercial data from iFrame instances due to allocating revenue to each hit so multiplying it
			tmpOm.eVar2 = tmpContext.paymentMethod;
			tmpOm.eVar12 = tmpContext.orderId;
			tmpOm.eVar53 = tmpContext.couponCode;
			tmpOm.eVar54 = tmpContext.offerId;
			tmpOm.eVar85 = tmpContext.currencyCode;
			tmpOm.state = tmpContext.state;
			tmpOm.zip = tmpContext.zip;
		} else if (tmpContext.orderId && tmpContext.omIframeSender == 'Omniture') {
			tmpOm.events = '';
			tmpOm.eVar2 = '';
			tmpOm.eVar12 = '';
			tmpOm.eVar53 = '';
			tmpOm.eVar54 = '';
			tmpOm.eVar85 = '';
			tmpOm.state = '';
			tmpOm.zip = '';
		}
	} else {
		tmpOm.instanceType = '[NULL]';
	}

	tmpOm.server = window.location.hostname;
	if (tmpContext.cartId) tmpOm.prop1 = tmpContext.cartId;
	// tmpOm.prop20
	tmpOm.prop29 = 'v1:' + prmOm.sCodeName + ':' + tmpOm.debugTrace + ':' + tmpOm.instanceType;
	tmpOm.prop30 = 'v1:' + prmOm.sCodeVersion + ':' + prmOm.sCodeBuild + ':' + prmOm.platformName + ':' + tmpContext.platformVersion;
	tmpOm.prop31 = removeHashFromString(omRemoveAllUrlParameters(document.location.href));
	tmpOm.prop37 = tmpOm.eVar37 || tmpContext.eVar37;
	tmpOm.prop47 = prmOm.siteType;
	if (prmOm.isECommProvider) {
		tmpOm.prop48 = 'v1:' + prmOm.eCommProvider + ':' + tmpContext.account + ':' + tmpContext.themeId;
	}
	if (tmpOm.pageNameArray[0] == 'Landing Pages' || (tmpOm.pageNameArray[0] == 'Other Pages' && tmpOm.pageNameArray[1] == 'Custom HTML')) {
		tmpOm.prop51 = 'Landing Pages'; // TODO Hotifx
	} else {
		tmpOm.prop51 = prmOm.siteClass;
	}
	tmpOm.prop56 = tmpContext.pageLocale;
	if (prmOm.pn == 'pp' || prmOm.pn == 'ap' || prmOm.pn == 'ea') {
		tmpOm.prop57 = tmpContext.siteRegion || '[NULL]';
	} else if (prmOm.pn == 'ng' || prmOm.pn == 'bl' || prmOm.pn == 'ms' || prmOm.pn == 'og' || prmOm.pn == 'po' || prmOm.pn == 'mi' || prmOm.pn == 'pc' || prmOm.pn == 'ma' || prmOm.pn == 'kb' || prmOm.pn == 'ot') {
		tmpOm.prop57 = tmpContext.siteLocale;
	} else if (prmOm.pn == 'dr' || prmOm.pn == 'ef' || prmOm.pn == 'av' || prmOm.pn == 'nw' || prmOm.pn == 'as' || prmOm.pn == 'aw') {
		tmpOm.prop57 = tmpContext.siteLocale + ':' + tmpContext.account;
	} else {
		tmpOm.prop57 = tmpContext.siteLocale || '[NULL]';
	}
	tmpOm.prop58 = document.title;
	if (prmOm.pn == 'pp' || prmOm.pn == 'ap') tmpOm.prop59 = tmpContext.partnerId;
	if (prmOm.pn == 'dr' && tmpContext.myKasperskyId) tmpOm.prop75 = tmpContext.myKasperskyId;
	if (tmpContext.cartId) tmpOm.eVar1 = 'D=c1';
	tmpOm.eVar3 = tmpOm.pageNameReal;
	tmpOm.eVar9 = omRemoveUrlParameter(omRemoveUrlParameter(document.location.href, '_ga'), 'mkt_tok');
	if (tmpOm.prop37) tmpOm.eVar37 = 'D=c37';
	tmpOm.eVar45 = tmpContext.prevInp;
	tmpOm.eVar47 = 'D=c47';
	if (prmOm.isECommProvider) {
		tmpOm.eVar48 = 'D=c48';
	}
	tmpOm.eVar57 = 'D=c57';
	// TODO tmpOm.eVar72
	if ((prmOm.pn != 'pp' || prmOm.pn == 'ap') && tmpContext.myKasperskyId) tmpOm.eVar75 = 'D=c75';
	tmpOm.eVar77 = tmpOm.customProperties;
	tmpOm.list2 = tmpOm.eVar7 || tmpContext.productsOnlyStr || tmpContext.productName || tmpOm.productName;
	if (tmpContext.croSegmentStr != '::::') tmpOm.eVar79 = 'v1:' + tmpContext.croSegmentStr;
	
	if (tmpContext.inpev == 'inst') {
		tmpOm.events = s.apl(tmpOm.events, 'event26', ',', 1);
	} else if (tmpContext.inpev == 'uninst') {
		tmpOm.events = s.apl(tmpOm.events, 'event27', ',', 1);
	}
	
	/*
	if (instanceType == 'p') {
		tmpOm.prop20 = tmpOm.prop20 || '';
		// tmpOm.prop20 = '"t3":' + prmOm.jsInitStartTime + ',"t4":' + (prmOm.jsInitEndTime - prmOm.jsInitStartTime) + ',"t5":' + tmpOm.trackPageViewStartTime + ',"t6":' + (tmpOm.trackPageViewStartTime - prmOm.jsInitStartTime);
		if (typeof tmpOm.notSentJson != 'undefined') {
			tmpOm.prop20 = s.apl(tmpOm.prop20, prmOm.notSentJson, ',', 1);
			console.log('OMNITURE: ' + tmpOm.notSentJson);
			omRemoveCookie('omNotSentJson');
		}
		if (typeof prmOm.notFiredTrackPageViewJson != 'undefined') {
			tmpOm.prop20 = s.apl(tmpOm.prop20, prmOm.notFiredTrackPageViewJson, ',', 1);
			console.log('OMNITURE: ' + prmOm.notFiredTrackPageViewJson);
			omRemoveCookie('omNotFiredTrackPageView');
		}
		if (tmpOm.prop20) tmpOm.prop20 = '{' + tmpOm.prop20 + '}';
	}
	*/
	
	return tmpOm;
	
}

/* Plugins */

function omAddSpaces(inputStr) {
	var previousChar = '';
	var currentChar = '';
	var resultStr = '';
	for (var i = 0; i < inputStr.length; i++) {
		currentChar = inputStr.charAt(i);
		if (previousChar != '' && currentChar == currentChar.toUpperCase() && previousChar != previousChar.toUpperCase()) {
			resultStr = resultStr + ' ' + currentChar;
		} else if (previousChar != '' && currentChar == '_') {
			resultStr = resultStr + ' ' + currentChar;
		} else {
			resultStr = resultStr + currentChar;
		}
	}
	return resultStr;
}

function omChooseCookieDomain() {
	var domain = document.location.hostname.replace(/^www\./i, '');
	domain = domain.replace(/^(.*)(\.kaspersky.*)$/i, '$2');
	if (domain[0] != '.') domain = '.' + domain;
	return domain;
}

function omCpaCallback(object) {
	if (object.coAffiliateName == 'Actionpay') {
		var el = 'getElementsByTagName', rs = 'readyState';
			if (document[rs] !== 'interactive' && document[rs] !== 'complete') {
			return setTimeout(function () { omCpaCallback(object) }, 100);
		}
		var script = document.createElement('script');
		script.type = 'text/javascript';
		script.async = script.defer = true;
		script.src = '//apypx.com/ok/16170.js?actionpay=' + object.coAid + '&apid=' + object.orderId + '&price=' + object.totalOrderAmount;
		var p = document[el]('body')[0] || document[el]('head')[0];
		if (p) p.appendChild(script);
	}
}

function omGetAbsoluteUrl(url) {
	var origin = omGetOrigin(url) || '';
	if (url == '') {
		return '';
	} else if (url.indexOf(origin) == 0) {
		return url;
	} else {
		if (url[0] != '/') url = '/' + url;
		return origin + url;
	}
}

function omGetHostName(href) {
	var l = document.createElement('a');
	l.href = href;
	return l.hostname || '';
}

function omGetOrigin(href) {
	var l = document.createElement('a');
	l.href = href;
	return l.origin || '';
}

function omGetQueryParam(param, url) {
	var paramValue = '';
	var url = url || document.location.href || '';
	var a = url.split('#')[0] || '';
	var b = a.split('?')[1] || '';
	var vars = b.split('&');
	param = param.toLowerCase();
	for (var i = 0; i < vars.length; i++) {
		var pair = vars[i].split('=');
		if (decodeURIComponent(pair[0]).toLowerCase() == param) {
			return decodeURIComponent(pair[1]);
		}
	}
}

function omReadCookie(name) {
	var nameEQ = name + '=';
	var ca = document.cookie.split(';');
	for(var i = 0; i < ca.length; i++) {
		var c = ca[i];
		while (c.charAt(0) == ' ') c = c.substring(1, c.length);
		if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
	}
	return null;
}

function omRemoveAllUrlParameters(inputURL, inputParam) {
	var outputURL = inputURL.split('?')[0];
	if (inputParam === undefined || inputURL.indexOf('?') == -1) {
		return outputURL;
	} else {
		var param,
			params_arr = [],
			queryString = (inputURL.indexOf('?') !== -1) ? inputURL.split('?')[1] : '';
		if (queryString !== '') {
			params_arr = queryString.split('&');
			for (var i = 0; i < params_arr.length; i++) {
				param = params_arr[i].split('=')[0];
				if (param === inputParam) {
					params_arr.splice(i, 1);
					i = i - 1;
				}
			}
		}
		if (params_arr.length) {
			outputURL += "?" + params_arr.join('&');
		}
		return outputURL;
	}
}

function omRemoveAllUrlParametersForDownloads(inputURL) {
	if (omGetHostName(inputURL).search(/data\.kaspersky\.co\.jp/i != -1)) {
		return omRemoveUrlParameter(inputURL, '_ga');
	} else if (inputURL.search(prmOm.downloadHrefRegexp) != -1) {
		var outputURL = inputURL.split('?')[0];
		if (inputURL.indexOf('?') == -1) {
			return outputURL;
		} else {
			var param,
				params_arr = [],
				queryString = (inputURL.indexOf('?') !== -1) ? inputURL.split('?')[1] : '';
			if (queryString !== '') {
				params_arr = queryString.split('&');
				for (var i = 0; i < params_arr.length; i++) {
					param = params_arr[i].split('=')[0];
					if (param != 'file' && param != 'lang' && param != 'track' && param != 'program') {
						params_arr.splice(i, 1);
						i = i - 1;
					}
				}
			}
			if (params_arr.length) {
				outputURL += "?" + params_arr.join('&');
			}
			return outputURL;
		}
	} else {
		return omRemoveAllUrlParameters(inputURL);
	}
}

function omRemoveUrlParameter(url, parameter) {
	if (typeof url == 'string' && url != '') {
		var urlparts = url.split('?');   
		if (urlparts.length >= 2) {
			var prefix = encodeURIComponent(parameter)+'=';
			var pars = urlparts[1].split(/[&;]/g);
			for (var i = pars.length; i-- > 0;) {
				if (pars[i].lastIndexOf(prefix, 0) !== -1) {
					pars.splice(i, 1);
				}
			}
			url = urlparts[0] + (pars.length > 0 ? '?' + pars.join('&') : "");
			return url;
		} else {
			return url;
		}
	} else {
		return '';
	}
}

function omRemoveCookie(name) {
	omSetCookie(name, '', -1);
}
	
function omSafeParseJson(json) {
	var obj = {};
	try {
		obj = JSON.parse(json)
	} catch (e) {
		//
	}
	return obj;
}

function omSetCookie(name, value, days) {
	var expires = '';
	if (days) {
		var date = new Date();
		date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
		expires = '; expires=' + date.toGMTString();
	}
	document.cookie = name + '=' + value + '; expires=Thu, 1 Apr 2018 00:00:00 GMT; path=/;'; // To remove legacy cookie
	document.cookie = name + '=' + value + expires + '; path=/; domain=' + prmOm.cookieDomain + ';';
}

function omSetInp(tmpOm) {
	var inp, inp_arr, inp_err = 0;
	if (inp = omGetQueryParam('inpkss')) {
		inp = inp.replace('%3A', ':');
		inp = inp.replace('%3a', ':'); // fix for encoded colon
		inp_arr = inp.split(':');
		if (inp_arr.length == 8) {
			//build
			if (inp_arr[0].length > 0 && inp_arr[1] && inp_arr[2] && inp_arr[3]) {
				tmpOm.eVar28 = inp_arr[0]+':'+inp_arr[1]+':'+inp_arr[2]+':'+inp_arr[3];
			} else {
				inp_err = 1;
			}
			//scenario
			if (inp_arr[4] && inp_arr[5] && inp_arr[6]) {
				tmpOm.eVar46 = inp_arr[4]+':'+inp_arr[5]+':'+inp_arr[6];
			} else {
				inp_err = 1;
			}
			//item
			if (inp_arr[7]) {
				tmpOm.eVar31 = inp_arr[7];
			}
		} else {
			inp_err = 1;
		}
		if (inp_err) {
			tmpOm.prop20 = '[ERROR] inpkss = '+inp;
		}
	} else if (inp = omGetQueryParam('inp')) {
		inp = inp.replace('%3A', ':'); // Fix
		inp = inp.replace('%3a', ':'); // Fix
		inp = inp.replace(':0:0:0:0::', ':0:0:0:0:0:'); // Fix for v2014
		if (inp.substring(inp.length - 3) == 'cwd') { // Fix for cwd
			inp = inp.replace('::', ':0:');
		}
		inp_arr = inp.split(':');
		if (inp_arr.length == 10 || (inp_arr.length == 9 && inp.substring(inp.length-1) == ':')) {
			//b
			if ( inp_arr[0].length > 0 && inp_arr[1] && inp_arr[2] && inp_arr[3] ) {
				tmpOm.eVar28 = inp_arr[0]+':'+inp_arr[1]+':'+inp_arr[2]+':'+inp_arr[3];
			} else {
				inp_err = 'b';
			}
			//l
			if (inp_arr[4].length > 0 && inp_arr[5].length > 0 && inp_arr[6].length > 0 && inp_arr[7].length > 0 && inp_arr[8].length > 0) {
				tmpOm.eVar32 = inp_arr[4]+':'+inp_arr[5]+':'+inp_arr[6]+':'+inp_arr[7]+':'+inp_arr[8];
			} else {
				inp_err = 'l';
			}
			//i
			if (inp_arr[9]) {
				tmpOm.eVar31 = inp_arr[9].replace(/\([^()]+\)/g,'()');
			}
		} else {
			inp_err = 1;
		}
		if (inp_err) {
			tmpOm.prop20 = '[ERROR] inp = ' + inp + (inp_err == 1 ? '' : ' | ' + inp_err);
		}
	}
	return tmpOm;
}

function removeHashFromString(str) {
	str = str.split('#')[0];
	return str;
}

/* Handlers */

if (window.addEventListener) {
	window.addEventListener('click', function(e) {
		omHandleClick(e, 'click');
	}, true);
	window.addEventListener('contextmenu', function(e) {
		omHandleClick(e, 'contextmenu');
	}, true);
	window.addEventListener('message', function(e) {
		omHandleMessage(e);
	}, true);
} else if (window.attachEvent) {
	window.attachEvent('onclick', function(e) {
		omHandleClick(e, 'click');
	});
	window.attachEvent('oncontextmenu', function(e) {
		omHandleClick(e, 'contextmenu');
	});
	window.attachEvent('onmessage', function(e) {
		omHandleMessage(e);
	});
}

function omHandleClick(e, clickType) {
	var tmpOm = {};
	var objEvent = e || event || window.event;
	var target = objEvent.target || objEvent.srcElement;
	var saleButtonUrl;
	var saleButtonName;
	var saleButtonDetected = false;
	var ctaHref;
	var ctaName;
	var ctaDetected = false;
	var downloadUrl;
	var downloadHost;
	var downloadName;
	var downloadButtonType;
	var downloadDetected = false;
	var exitDetected = false;
	var exitHref;
	var exitHost;
	var bubbling = true;
	while (bubbling && target) {
		if (saleButtonDetected == false) {
			saleButtonUrl = omGetAbsoluteUrl(target.getAttribute('data-omniture-buy-url') || target.href || '');
			saleButtonName = target.getAttribute('data-omniture-sale-button-type') || '';
			if (saleButtonName || (saleButtonUrl && saleButtonUrl.search(prmOm.saleButtonRegexp) != -1)) {
				saleButtonDetected = true;
				tmpOm.dataOmnitureProductName = target.getAttribute('data-omniture-product-name') || '';
				tmpOm.debugTrace = s.apl(tmpOm.debugTrace, 'omHandleClick', ' > ', 0);
				tmpOm.isSalePage = true;
				trackSaleButton(saleButtonUrl, saleButtonName, clickType, tmpOm);
			}
		}
		if (downloadDetected == false) {
			downloadUrl = omGetAbsoluteUrl(target.getAttribute('data-omniture-download-url') || target.href || (target.shadowRoot && target.shadowRoot.querySelector('a[data-omniture-download-button-type]') && target.shadowRoot.querySelector('a[data-omniture-download-button-type]').href) || '');
			downloadHost = omGetHostName(downloadUrl);
			if (downloadUrl && downloadHost && (downloadHost.search(prmOm.downloadRegexp) != -1 || downloadUrl.search(prmOm.downloadHrefRegexp) != -1)) {
				downloadDetected = true;
				downloadButtonType = target.getAttribute('data-omniture-download-button-type') || '';
				tmpOm.debugTrace = s.apl(tmpOm.debugTrace, 'omHandleClick', ' > ', 0);
				trackDownload(downloadUrl, downloadButtonType, clickType, tmpOm);
			}
		}
		if (ctaDetected == false) {
			ctaName = target.getAttribute('data-omniture-cta-name');
			if (ctaName) {
				ctaDetected = true;
				ctaHref = target.getAttribute('href');
				tmpOm.debugTrace = s.apl(tmpOm.debugTrace, 'omHandleClick', ' > ', 0);
				trackCta(ctaHref, ctaName, clickType, tmpOm);
			}
		}
		if (exitDetected == false) {
			exitHref = target.getAttribute('href');
			exitHost = target.hostname;
			if (exitHref && exitHost && exitHost.search(prmOm.siteRegexp) == -1 && exitHref.search(/^http.*/) == 0) {
				exitDetected = true;
				tmpOm.dataOmnitureProductName = target.getAttribute('data-omniture-product-name') || '';
				tmpOm.debugTrace = s.apl(tmpOm.debugTrace, 'omHandleClick', ' > ', 0);
				trackExit(exitHref, clickType, tmpOm);
			}
		}
		if (target.nodeName == 'A') {
			bubbling = false;
		} else if (target != document.body && target != document) {
			target = target.parentNode;
		} else  {
			bubbling = false;
		}
	}
}

function omHandleMessage(e) {
	var omMessage = {};
	if (typeof e.data == 'string') {
		if (typeof JSON == 'object' && typeof JSON.stringify == 'function') {
			omMessage = omSafeParseJson(e.data) || {};
		} else {
			omMessage = {};
		}
	} else {
		omMessage = e.data || {};
	}
	if (omMessage.sender == 'Omniture' && omMessage.eventKey != '') {
		var tmpOm = {};
		tmpOm.debugTrace = s.apl(tmpOm.debugTrace, omMessage.debugTrace || '[NULL]', ' > ', 0);
		tmpOm.debugTrace = s.apl(tmpOm.debugTrace, 'omHandleMessage', ' > ', 0);
		if (omMessage.eventKey == 'trackCta') {
			trackCta(omMessage.ctaHref, omMessage.ctaName, omMessage.clickType, tmpOm, omMessage);
		} else if (omMessage.eventKey == 'trackDownload') {
			trackDownload(omMessage.downloadHref, omMessage.downloadType, omMessage.clickType, tmpOm, omMessage);
		} else if (omMessage.eventKey == 'exitHref') {
			trackExit(omMessage.exitHref, omMessage.clickType, tmpOm, omMessage);
		} else if (omMessage.eventKey == 'trackPageView') {
			trackPageView(kaspersky.pageName + ' > ' + omMessage.trackPageViewPageName, tmpOm, omMessage);
		} else if (omMessage.eventKey == 'trackRegistration') {
			trackRegistration(omMessage.type, tmpOm, omMessage);
		} else if (omMessage.eventKey == 'trackSignIn') {
			trackSignIn(omMessage.type, tmpOm, omMessage);
		}
	}
}

/** @license ============== DO NOT ALTER ANYTHING BELOW THIS LINE ! ============

Adobe Visitor API for JavaScript version: 2.5.0
Copyright 1996-2015 Adobe, Inc. All Rights Reserved
More info available at https://marketing.adobe.com/resources/help/en_US/mcvid/
*/
!function e(t,i,n){function r(s,o){if(!i[s]){if(!t[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=i[s]={exports:{}};t[s][0].call(c.exports,function(e){var i=t[s][1][e];return r(i||e)},c,c.exports,e,t,i,n)}return i[s].exports}for(var a="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(e,t,i){(function(i){e("./utils/polyfills");var n=e("./strategies/LocalVisitor"),r=e("./strategies/ProxyVisitor"),a=e("./strategies/PlaceholderVisitor"),s=e("./utils/callbackRegistryFactory"),o=e("./Message"),l=e("./enums"),u=l.MESSAGES;t.exports=function(e,t,l,c){function d(e){Object.assign(D,e)}function f(e){Object.assign(D.state,e),D.callbackRegistry.executeAll(D.state)}function g(e){if(!A.isInvalid(e)){v=!1;var t=A.parse(e);D.setStateAndPublish(t.state)}}function _(e){!v&&I&&(v=!0,A.send(c,e))}function p(){d(new n(l._generateID)),D.getMarketingCloudVisitorID(),D.callbackRegistry.executeAll(D.state,!0),i.removeEventListener("message",m)}function m(e){if(!A.isInvalid(e)){var t=A.parse(e);v=!1,i.clearTimeout(this.timeout),i.removeEventListener("message",m),d(new r(D)),i.addEventListener("message",g),D.setStateAndPublish(t.state),D.callbackRegistry.hasCallbacks()&&_(u.GETSTATE)}}function h(){I&&postMessage?(i.addEventListener("message",m),_(u.HANDSHAKE),this.timeout=setTimeout(p,250)):p()}function C(){i.s_c_in||(i.s_c_il=[],i.s_c_in=0),D._c="Visitor",D._il=i.s_c_il,D._in=i.s_c_in,D._il[D._in]=D,i.s_c_in++}function S(){function e(e){0!==e.indexOf("_")&&"function"==typeof l[e]&&(D[e]=function(){})}Object.keys(l).forEach(e),D.getSupplementalDataID=l.getSupplementalDataID}var D=this,I=t.whitelistParentDomain;D.state={},D.version=l.version,D.marketingCloudOrgID=e;var v=!1,A=new o(e,I);D.callbackRegistry=s(),D.findField=function(e,t){if(D.state[e])return t(D.state[e]),D.state[e]},D.messageParent=_,D.setStateAndPublish=f,function(){C(),S(),d(new a(D)),h()}()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Message":2,"./enums":4,"./strategies/LocalVisitor":5,"./strategies/PlaceholderVisitor":6,"./strategies/ProxyVisitor":7,"./utils/callbackRegistryFactory":9,"./utils/polyfills":11}],2:[function(e,t,i){var n=e("./enums"),r=n.MESSAGES,a={0:"prefix",1:"orgID",2:"state"};t.exports=function(e,t){this.parse=function(e){try{var t={};return e.data.split("|").forEach(function(e,i){if(void 0!==e){t[a[i]]=2!==i?e:JSON.parse(e)}}),t}catch(e){}},this.isInvalid=function(i){var n=this.parse(i);if(!n||Object.keys(n).length<2)return!0;var a=e!==n.orgID,s=!t||i.origin!==t,o=-1===Object.keys(r).indexOf(n.prefix);return a||s||o},this.send=function(i,n,r){var a=n+"|"+e;r&&r===Object(r)&&(a+="|"+JSON.stringify(r));try{i.postMessage(a,t)}catch(e){}}}},{"./enums":4}],3:[function(e,t,i){(function(i){function n(){function e(){l.windowLoaded=!0}i.addEventListener?i.addEventListener("load",e):i.attachEvent&&i.attachEvent("onload",e),l.codeLoadEnd=(new Date).getTime()}
var r=e("./ChildVisitor"),a=e("./Message"),s=e("./utils/makeChildMessageListener"),o=e("./utils/asyncParallelApply"),l=function(e,t){function n(e){var t=e;return function(e){var i=e||p.location.href;try{var n=_._extractParamFromUri(i,t);if(n)return F.parsePipeDelimetedKeyValues(n)}catch(e){}}}function r(e){function t(e,t){e&&e.match(C.VALID_VISITOR_ID_REGEX)&&t(e)}t(e[I],_.setMarketingCloudVisitorID),_._setFieldExpire(P,-1),t(e[T],_.setAnalyticsVisitorID)}function l(e){e=e||{},_._supplementalDataIDCurrent=e.supplementalDataIDCurrent||"",_._supplementalDataIDCurrentConsumed=e.supplementalDataIDCurrentConsumed||{},_._supplementalDataIDLast=e.supplementalDataIDLast||"",_._supplementalDataIDLastConsumed=e.supplementalDataIDLastConsumed||{}}function u(e){for(var t="",i=0,n=e.length;i<n;i++){var r=e[i],a=r[0],s=r[1];null!=s&&s!==R&&(t=function(e,t,i){return i=i?i+="|":i,i+=e+"="+encodeURIComponent(t)}(a,s,t))}return function(e){var t=F.getTimestampInSeconds();return e=e?e+="|":e,e+="TS="+t}(t)}function c(e){var t=e.minutesToLive,i="";return _.idSyncDisableSyncs&&(i=i||"Error: id syncs have been disabled"),"string"==typeof e.dpid&&e.dpid.length||(i=i||"Error: config.dpid is empty"),"string"==typeof e.url&&e.url.length||(i=i||"Error: config.url is empty"),void 0===t?t=20160:(t=parseInt(t,10),(isNaN(t)||t<=0)&&(i=i||"Error: config.minutesToLive needs to be a positive number")),{error:i,ttl:t}}function d(e){for(var t=0,i=e.length;t<i;t++)if(!C.POSITIVE_INT_REGEX.test(e[t]))return!1;return!0}function f(e,t){for(;e.length<t.length;)e.push("0");for(;t.length<e.length;)t.push("0")}function g(e,t){for(var i=0;i<e.length;i++){var n=parseInt(e[i],10),r=parseInt(t[i],10);if(n>r)return 1;if(r>n)return-1}return 0}if(!e)throw new Error("Visitor requires Adobe Marketing Cloud Org ID");var _=this;_.version="2.5.0";var p=i,m=p.Visitor;m.version=_.version,p.s_c_in||(p.s_c_il=[],p.s_c_in=0),_._c="Visitor",_._il=p.s_c_il,_._in=p.s_c_in,_._il[_._in]=_,p.s_c_in++,_._log={requests:[]};var h=p.document,C={POST_MESSAGE_ENABLED:!!p.postMessage,DAYS_BETWEEN_SYNC_ID_CALLS:1,MILLIS_PER_DAY:864e5,ADOBE_MC:"adobe_mc",ADOBE_MC_SDID:"adobe_mc_sdid",VALID_VISITOR_ID_REGEX:/^[0-9a-fA-F\-]+$/,ADOBE_MC_TTL_IN_MIN:5,POSITIVE_INT_REGEX:/^\d+$/,VERSION_REGEX:/vVersion\|((\d+\.)?(\d+\.)?(\*|\d+))(?=$|\|)/,HAS_JSON_STRINGIFY:window.JSON===Object(window.JSON)&&"function"==typeof window.JSON.stringify},S=function(e){return!Object.prototype[e]};_._hash=function(e){var t,i,n=0;if(e)for(t=0;t<e.length;t++)i=e.charCodeAt(t),n=(n<<5)-n+i,n&=n;return n},_._generateID=function(e,t){var i,n,r="0123456789",a="",s="",o=8,l=10,u=10;if(t===I&&(V.isClientSideMarketingCloudVisitorID=!0),1===e){for(r+="ABCDEF",i=0;i<16;i++)n=Math.floor(Math.random()*o),a+=r.substring(n,n+1),n=Math.floor(Math.random()*o),s+=r.substring(n,n+1),o=16;return a+"-"+s}for(i=0;i<19;i++)n=Math.floor(Math.random()*l),a+=r.substring(n,n+1),0===i&&9===n?l=3:(1===i||2===i)&&10!==l&&n<2?l=10:i>2&&(l=10),n=Math.floor(Math.random()*u),s+=r.substring(n,n+1),0===i&&9===n?u=3:(1===i||2===i)&&10!==u&&n<2?u=10:i>2&&(u=10);return a+s},_._getDomain=function(e){var t;if(!e&&p.location&&(e=p.location.hostname),t=e)if(/^[0-9.]+$/.test(t))t="";else{var i=",ac,ad,ae,af,ag,ai,al,am,an,ao,aq,ar,as,at,au,aw,ax,az,ba,bb,be,bf,bg,bh,bi,bj,bm,bo,br,bs,bt,bv,bw,by,bz,ca,cc,cd,cf,cg,ch,ci,cl,cm,cn,co,cr,cu,cv,cw,cx,cz,de,dj,dk,dm,do,dz,ec,ee,eg,es,et,eu,fi,fm,fo,fr,ga,gb,gd,ge,gf,gg,gh,gi,gl,gm,gn,gp,gq,gr,gs,gt,gw,gy,hk,hm,hn,hr,ht,hu,id,ie,im,in,io,iq,ir,is,it,je,jo,jp,kg,ki,km,kn,kp,kr,ky,kz,la,lb,lc,li,lk,lr,ls,lt,lu,lv,ly,ma,mc,md,me,mg,mh,mk,ml,mn,mo,mp,mq,mr,ms,mt,mu,mv,mw,mx,my,na,nc,ne,nf,ng,nl,no,nr,nu,nz,om,pa,pe,pf,ph,pk,pl,pm,pn,pr,ps,pt,pw,py,qa,re,ro,rs,ru,rw,sa,sb,sc,sd,se,sg,sh,si,sj,sk,sl,sm,sn,so,sr,st,su,sv,sx,sy,sz,tc,td,tf,tg,th,tj,tk,tl,tm,tn,to,tp,tr,tt,tv,tw,tz,ua,ug,uk,us,uy,uz,va,vc,ve,vg,vi,vn,vu,wf,ws,yt,",n=t.split("."),r=n.length-1,a=r-1;if(r>1&&n[r].length<=2&&(2===n[r-1].length||i.indexOf(","+n[r]+",")<0)&&a--,a>0)for(t="";r>=a;)t=n[r]+(t?".":"")+t,r--}return t},_.cookieRead=function(e){e=encodeURIComponent(e);var t=(";"+h.cookie).split(" ").join(";"),i=t.indexOf(";"+e+"="),n=i<0?i:t.indexOf(";",i+1);return i<0?"":decodeURIComponent(t.substring(i+2+e.length,n<0?t.length:n))},_.cookieWrite=function(e,t,i){var n,r=_.cookieLifetime;if(t=""+t,r=r?(""+r).toUpperCase():"",i&&"SESSION"!==r&&"NONE"!==r){if(n=""!==t?parseInt(r||0,10):-60)i=new Date,i.setTime(i.getTime()+1e3*n);else if(1===i){i=new Date;var a=i.getYear();i.setYear(a+2+(a<1900?1900:0))}}else i=0;return e&&"NONE"!==r?(h.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+"; path=/;"+(i?" expires="+i.toGMTString()+";":"")+(_.cookieDomain?" domain="+_.cookieDomain+";":""),_.cookieRead(e)===t):0},_._callbackList=null,_._callCallback=function(e,t){try{"function"==typeof e?e.apply(p,t):e[1].apply(e[0],t)}catch(e){}},_._registerCallback=function(e,t){t&&(null==_._callbackList&&(_._callbackList={}),void 0==_._callbackList[e]&&(_._callbackList[e]=[]),_._callbackList[e].push(t))},_._callAllCallbacks=function(e,t){if(null!=_._callbackList){var i=_._callbackList[e];if(i)for(;i.length>0;)_._callCallback(i.shift(),t)}},_._addQuerystringParam=function(e,t,i,n){var r=encodeURIComponent(t)+"="+encodeURIComponent(i),a=F.parseHash(e),s=F.hashlessUrl(e);if(-1===s.indexOf("?"))return s+"?"+r+a;var o=s.split("?"),l=o[0]+"?",u=o[1];return l+F.addQueryParamAtLocation(u,r,n)+a},_._extractParamFromUri=function(e,t){var i=new RegExp("[\\?&#]"+t+"=([^&#]*)"),n=i.exec(e);if(n&&n.length)return decodeURIComponent(n[1])},_._parseAdobeMcFromUrl=n(C.ADOBE_MC),_._parseAdobeMcSdidFromUrl=n(C.ADOBE_MC_SDID),_._attemptToPopulateSdidFromUrl=function(t){var i=_._parseAdobeMcSdidFromUrl(t),n=1e9;i&&i.TS&&(n=F.getTimestampInSeconds()-i.TS),i&&i.SDID&&i[v]===e&&n<_.sdidParamExpiry&&(_._supplementalDataIDCurrent=i.SDID,_._supplementalDataIDCurrentConsumed.SDID_URL_PARAM=!0)},_._attemptToPopulateIdsFromUrl=function(){var t=_._parseAdobeMcFromUrl();if(t&&t.TS){var i=F.getTimestampInSeconds(),n=i-t.TS;if(Math.floor(n/60)>C.ADOBE_MC_TTL_IN_MIN||t[v]!==e)return;r(t)}},_.resetState=function(e){e?_._mergeServerState(e):l()},_._mergeServerState=function(e){if(e)try{if(e=function(e){return F.isObject(e)?e:F.parseJSON(e)}(e),e[_.marketingCloudOrgID]){var t=e[_.marketingCloudOrgID];!function(e){F.isObject(e)&&_.setCustomerIDs(e)}(t.customerIDs),l(t.sdid)}}catch(e){throw new Error("`serverState` has an invalid format.")}},_._timeout=null,_._loadData=function(e,t,i,n){t=_._addQuerystringParam(t,"d_fieldgroup",e,1),n.url=_._addQuerystringParam(n.url,"d_fieldgroup",e,1),n.corsUrl=_._addQuerystringParam(n.corsUrl,"d_fieldgroup",e,1),V.fieldGroupObj[e]=!0,n===Object(n)&&n.corsUrl&&"XMLHttpRequest"===_._requestProcs.corsMetadata.corsType?_._requestProcs.fireCORS(n,i,e):_.useCORSOnly||_._loadJSONP(e,t,i)},_._loadJSONP=function(e,t,i){var n,r=0,a=0;if(t&&h){for(n=0;!r&&n<2;){try{r=h.getElementsByTagName(n>0?"HEAD":"head"),r=r&&r.length>0?r[0]:0}catch(e){r=0}n++}if(!r)try{h.body&&(r=h.body)}catch(e){r=0}if(r)for(n=0;!a&&n<2;){try{a=h.createElement(n>0?"SCRIPT":"script")}catch(e){a=0}n++}}if(!t||!r||!a)return void(i&&i());a.type="text/javascript",a.src=t,r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a);var s=_.loadTimeout;i&&(null==_._timeout&&(_._timeout={}),_._timeout[e]=setTimeout(function(){i(!0)},s)),_._log.requests.push(t)},_._clearTimeout=function(e){null!=_._timeout&&_._timeout[e]&&(clearTimeout(_._timeout[e]),_._timeout[e]=0)},_._isAllowedDone=!1,_._isAllowedFlag=!1,_.isAllowed=function(){return _._isAllowedDone||(_._isAllowedDone=!0,(_.cookieRead(_.cookieName)||_.cookieWrite(_.cookieName,"T",1))&&(_._isAllowedFlag=!0)),_._isAllowedFlag},_._fields=null,_._fieldsExpired=null;var D="MC",I="MCMID",v="MCORGID",A="MCCIDH",y="MCSYNCS",M="MCSYNCSOP",b="MCIDTS",E="MCOPTOUT",O="A",T="MCAID",k="AAM",L="MCAAMLH",P="MCAAMB",R="NONE";_.FIELDS={MCMID:"MCMID",MCOPTOUT:"MCOPTOUT",MCAID:"MCAID",MCAAMLH:"MCAAMLH",MCAAMB:"MCAAMB"},_._settingsDigest=0,_._getSettingsDigest=function(){if(!_._settingsDigest){var e=_.version;_.audienceManagerServer&&(e+="|"+_.audienceManagerServer),_.audienceManagerServerSecure&&(e+="|"+_.audienceManagerServerSecure),_._settingsDigest=_._hash(e)}return _._settingsDigest},_._readVisitorDone=!1,_._readVisitor=function(){if(!_._readVisitorDone){_._readVisitorDone=!0;var e,t,i,n,r,a,s=_._getSettingsDigest(),o=!1,l=_.cookieRead(_.cookieName),u=new Date;if(null==_._fields&&(_._fields={}),l&&"T"!==l)for(l=l.split("|"),l[0].match(/^[\-0-9]+$/)&&(parseInt(l[0],10)!==s&&(o=!0),l.shift()),l.length%2==1&&l.pop(),e=0;e<l.length;e+=2)t=l[e].split("-"),i=t[0],n=l[e+1],t.length>1?(r=parseInt(t[1],10),a=t[1].indexOf("s")>0):(r=0,a=!1),o&&(i===A&&(n=""),r>0&&(r=u.getTime()/1e3-60)),i&&n&&(_._setField(i,n,1),r>0&&(_._fields["expire"+i]=r+(a?"s":""),(u.getTime()>=1e3*r||a&&!_.cookieRead(_.sessionCookieName))&&(_._fieldsExpired||(_._fieldsExpired={}),_._fieldsExpired[i]=!0)));!_._getField(T)&&F.isTrackingServerPopulated()&&(l=_.cookieRead("s_vi"))&&(l=l.split("|"),l.length>1&&l[0].indexOf("v1")>=0&&(n=l[1],e=n.indexOf("["),e>=0&&(n=n.substring(0,e)),n&&n.match(C.VALID_VISITOR_ID_REGEX)&&_._setField(T,n)))}},_._appendVersionTo=function(e){var t="vVersion|"+_.version,i=e?_._getCookieVersion(e):null;return i?F.areVersionsDifferent(i,_.version)&&(e=e.replace(C.VERSION_REGEX,t)):e+=(e?"|":"")+t,e},_._writeVisitor=function(){var e,t,i=_._getSettingsDigest();for(e in _._fields)S(e)&&_._fields[e]&&"expire"!==e.substring(0,6)&&(t=_._fields[e],i+=(i?"|":"")+e+(_._fields["expire"+e]?"-"+_._fields["expire"+e]:"")+"|"+t);i=_._appendVersionTo(i),_.cookieWrite(_.cookieName,i,1)},_._getField=function(e,t){return null==_._fields||!t&&_._fieldsExpired&&_._fieldsExpired[e]?null:_._fields[e]},_._setField=function(e,t,i){null==_._fields&&(_._fields={}),_._fields[e]=t,i||_._writeVisitor()},_._getFieldList=function(e,t){var i=_._getField(e,t);return i?i.split("*"):null},_._setFieldList=function(e,t,i){_._setField(e,t?t.join("*"):"",i)},_._getFieldMap=function(e,t){var i=_._getFieldList(e,t);if(i){var n,r={};for(n=0;n<i.length;n+=2)r[i[n]]=i[n+1];return r}return null},_._setFieldMap=function(e,t,i){var n,r=null;if(t){r=[];for(n in t)S(n)&&(r.push(n),r.push(t[n]))}_._setFieldList(e,r,i)},_._setFieldExpire=function(e,t,i){var n=new Date;n.setTime(n.getTime()+1e3*t),null==_._fields&&(_._fields={}),_._fields["expire"+e]=Math.floor(n.getTime()/1e3)+(i?"s":""),t<0?(_._fieldsExpired||(_._fieldsExpired={}),_._fieldsExpired[e]=!0):_._fieldsExpired&&(_._fieldsExpired[e]=!1),i&&(_.cookieRead(_.sessionCookieName)||_.cookieWrite(_.sessionCookieName,"1"))},_._findVisitorID=function(e){return e&&("object"==typeof e&&(e=e.d_mid?e.d_mid:e.visitorID?e.visitorID:e.id?e.id:e.uuid?e.uuid:""+e),e&&"NOTARGET"===(e=e.toUpperCase())&&(e=R),e&&(e===R||e.match(C.VALID_VISITOR_ID_REGEX))||(e="")),e},_._setFields=function(e,t){if(_._clearTimeout(e),null!=_._loading&&(_._loading[e]=!1),V.fieldGroupObj[e]&&V.setState(e,!1),e===D){!0!==V.isClientSideMarketingCloudVisitorID&&(V.isClientSideMarketingCloudVisitorID=!1);var i=_._getField(I);if(!i||_.overwriteCrossDomainMCIDAndAID){if(!(i="object"==typeof t&&t.mid?t.mid:_._findVisitorID(t))){if(_._use1stPartyMarketingCloudServer&&!_.tried1stPartyMarketingCloudServer)return _.tried1stPartyMarketingCloudServer=!0,void _.getAnalyticsVisitorID(null,!1,!0);i=_._generateID(0,I)}_._setField(I,i)}i&&i!==R||(i=""),"object"==typeof t&&((t.d_region||t.dcs_region||t.d_blob||t.blob)&&_._setFields(k,t),_._use1stPartyMarketingCloudServer&&t.mid&&_._setFields(O,{id:t.id})),_._callAllCallbacks(I,[i])}if(e===k&&"object"==typeof t){var n=604800;void 0!=t.id_sync_ttl&&t.id_sync_ttl&&(n=parseInt(t.id_sync_ttl,10));var r=N.getRegionAndCheckIfChanged(t,n);_._callAllCallbacks(L,[r]);var a=_._getField(P);(t.d_blob||t.blob)&&(a=t.d_blob,a||(a=t.blob),_._setFieldExpire(P,n),_._setField(P,a)),a||(a=""),_._callAllCallbacks(P,[a]),!t.error_msg&&_._newCustomerIDsHash&&_._setField(A,_._newCustomerIDsHash)}if(e===O){var s=_._getField(T);s&&!_.overwriteCrossDomainMCIDAndAID||(s=_._findVisitorID(t),s?s!==R&&_._setFieldExpire(P,-1):s=R,_._setField(T,s)),s&&s!==R||(s=""),_._callAllCallbacks(T,[s])}if(_.idSyncDisableSyncs)N.idCallNotProcesssed=!0;else{N.idCallNotProcesssed=!1;var o={};o.ibs=t.ibs,o.subdomain=t.subdomain,N.processIDCallData(o)}if(t===Object(t)){var l,u;_.isAllowed()&&(l=_._getField(E)),l||(l=R,t.d_optout&&t.d_optout instanceof Array&&(l=t.d_optout.join(",")),u=parseInt(t.d_ottl,10),isNaN(u)&&(u=7200),_._setFieldExpire(E,u,!0),_._setField(E,l)),_._callAllCallbacks(E,[l])}},_._loading=null,_._getRemoteField=function(e,t,i,n,r){var a,s="",o=F.isFirstPartyAnalyticsVisitorIDCall(e);if(_.isAllowed()){_._readVisitor(),s=_._getField(e,!0===j[e]);if(function(){return(!s||_._fieldsExpired&&_._fieldsExpired[e])&&(!_.disableThirdPartyCalls||o)}()){if(e===I||e===E?a=D:e===L||e===P?a=k:e===T&&(a=O),a)return!t||null!=_._loading&&_._loading[a]||(null==_._loading&&(_._loading={}),_._loading[a]=!0,_._loadData(a,t,function(t){if(!_._getField(e)){t&&V.setState(a,!0);var i="";e===I?i=_._generateID(0,I):a===k&&(i={error_msg:"timeout"}),_._setFields(a,i)}},r)),_._registerCallback(e,i),s||(t||_._setFields(a,{id:R}),"")}else s||(e===I?(_._registerCallback(e,i),s=_._generateID(0,I),_.setMarketingCloudVisitorID(s)):e===T?(_._registerCallback(e,i),s="",_.setAnalyticsVisitorID(s)):(s="",n=!0))}return e!==I&&e!==T||s!==R||(s="",n=!0),i&&n&&_._callCallback(i,[s]),s},_._setMarketingCloudFields=function(e){_._readVisitor(),_._setFields(D,e)},_.setMarketingCloudVisitorID=function(e){_._setMarketingCloudFields(e)},_._use1stPartyMarketingCloudServer=!1,_.getMarketingCloudVisitorID=function(e,t){if(_.isAllowed()){_.marketingCloudServer&&_.marketingCloudServer.indexOf(".demdex.net")<0&&(_._use1stPartyMarketingCloudServer=!0);var i=_._getAudienceManagerURLData("_setMarketingCloudFields"),n=i.url;return _._getRemoteField(I,n,e,t,i)}return""},_.getVisitorValues=function(e,t){var i={MCMID:{fn:_.getMarketingCloudVisitorID,args:[!0],context:_},MCOPTOUT:{fn:_.isOptedOut,args:[void 0,!0],context:_},MCAID:{fn:_.getAnalyticsVisitorID,args:[!0],context:_},MCAAMLH:{fn:_.getAudienceManagerLocationHint,args:[!0],context:_},MCAAMB:{fn:_.getAudienceManagerBlob,args:[!0],context:_}};o(function(){if(!t||!t.length)return i;var e={};return t.forEach(function(t){i[t]&&(e[t]=i[t])}),e}(),e)},_._mapCustomerIDs=function(e){_.getAudienceManagerBlob(e,!0)},m.AuthState={UNKNOWN:0,AUTHENTICATED:1,LOGGED_OUT:2},_._currentCustomerIDs={},_._customerIDsHashChanged=!1,_._newCustomerIDsHash="",_.setCustomerIDs=function(e){function t(){_._customerIDsHashChanged=!1}if(_.isAllowed()&&e){_._readVisitor();var i,n;for(i in e)if(S(i)&&(n=e[i]))if("object"==typeof n){var r={};n.id&&(r.id=n.id),void 0!=n.authState&&(r.authState=n.authState),_._currentCustomerIDs[i]=r}else _._currentCustomerIDs[i]={id:n};var a=_.getCustomerIDs(),s=_._getField(A),o="";s||(s=0);for(i in a)S(i)&&(n=a[i],o+=(o?"|":"")+i+"|"+(n.id?n.id:"")+(n.authState?n.authState:""));_._newCustomerIDsHash=_._hash(o),_._newCustomerIDsHash!==s&&(_._customerIDsHashChanged=!0,_._mapCustomerIDs(t))}},_.getCustomerIDs=function(){_._readVisitor();var e,t,i={};for(e in _._currentCustomerIDs)S(e)&&(t=_._currentCustomerIDs[e],i[e]||(i[e]={}),t.id&&(i[e].id=t.id),void 0!=t.authState?i[e].authState=t.authState:i[e].authState=m.AuthState.UNKNOWN);return i},_._setAnalyticsFields=function(e){_._readVisitor(),_._setFields(O,e)},_.setAnalyticsVisitorID=function(e){_._setAnalyticsFields(e)},_.getAnalyticsVisitorID=function(e,t,i){if(!F.isTrackingServerPopulated()&&!i)return _._callCallback(e,[""]),"";if(_.isAllowed()){var n="";if(i||(n=_.getMarketingCloudVisitorID(function(t){_.getAnalyticsVisitorID(e,!0)})),n||i){var r=i?_.marketingCloudServer:_.trackingServer,a="";_.loadSSL&&(i?_.marketingCloudServerSecure&&(r=_.marketingCloudServerSecure):_.trackingServerSecure&&(r=_.trackingServerSecure));var s={};if(r){var o="http"+(_.loadSSL?"s":"")+"://"+r+"/id",l="d_visid_ver="+_.version+"&mcorgid="+encodeURIComponent(_.marketingCloudOrgID)+(n?"&mid="+encodeURIComponent(n):"")+(_.idSyncDisable3rdPartySyncing?"&d_coppa=true":""),u=["s_c_il",_._in,"_set"+(i?"MarketingCloud":"Analytics")+"Fields"];a=o+"?"+l+"&callback=s_c_il%5B"+_._in+"%5D._set"+(i?"MarketingCloud":"Analytics")+"Fields",s.corsUrl=o+"?"+l,s.callback=u}return s.url=a,_._getRemoteField(i?I:T,a,e,t,s)}}return""},_._setAudienceManagerFields=function(e){_._readVisitor(),_._setFields(k,e)},_._getAudienceManagerURLData=function(e){var t=_.audienceManagerServer,i="",n=_._getField(I),r=_._getField(P,!0),a=_._getField(T),s=a&&a!==R?"&d_cid_ic=AVID%01"+encodeURIComponent(a):"";if(_.loadSSL&&_.audienceManagerServerSecure&&(t=_.audienceManagerServerSecure),t){var o,l,u=_.getCustomerIDs();if(u)for(o in u)S(o)&&(l=u[o],s+="&d_cid_ic="+encodeURIComponent(o)+"%01"+encodeURIComponent(l.id?l.id:"")+(l.authState?"%01"+l.authState:""));e||(e="_setAudienceManagerFields");var c="http"+(_.loadSSL?"s":"")+"://"+t+"/id",d="d_visid_ver="+_.version+"&d_rtbd=json&d_ver=2"+(!n&&_._use1stPartyMarketingCloudServer?"&d_verify=1":"")+"&d_orgid="+encodeURIComponent(_.marketingCloudOrgID)+"&d_nsid="+(_.idSyncContainerID||0)+(n?"&d_mid="+encodeURIComponent(n):"")+(_.idSyncDisable3rdPartySyncing?"&d_coppa=true":"")+(!0===U?"&d_coop_safe=1":!1===U?"&d_coop_unsafe=1":"")+(r?"&d_blob="+encodeURIComponent(r):"")+s,f=["s_c_il",_._in,e];return i=c+"?"+d+"&d_cb=s_c_il%5B"+_._in+"%5D."+e,{url:i,corsUrl:c+"?"+d,callback:f}}return{url:i}},_.getAudienceManagerLocationHint=function(e,t){if(_.isAllowed()){if(_.getMarketingCloudVisitorID(function(t){_.getAudienceManagerLocationHint(e,!0)})){var i=_._getField(T);if(!i&&F.isTrackingServerPopulated()&&(i=_.getAnalyticsVisitorID(function(t){_.getAudienceManagerLocationHint(e,!0)})),i||!F.isTrackingServerPopulated()){var n=_._getAudienceManagerURLData(),r=n.url;return _._getRemoteField(L,r,e,t,n)}}}return""},_.getLocationHint=_.getAudienceManagerLocationHint,_.getAudienceManagerBlob=function(e,t){if(_.isAllowed()){if(_.getMarketingCloudVisitorID(function(t){_.getAudienceManagerBlob(e,!0)})){var i=_._getField(T);if(!i&&F.isTrackingServerPopulated()&&(i=_.getAnalyticsVisitorID(function(t){_.getAudienceManagerBlob(e,!0)})),i||!F.isTrackingServerPopulated()){var n=_._getAudienceManagerURLData(),r=n.url;return _._customerIDsHashChanged&&_._setFieldExpire(P,-1),_._getRemoteField(P,r,e,t,n)}}}return""},_._supplementalDataIDCurrent="",_._supplementalDataIDCurrentConsumed={},_._supplementalDataIDLast="",_._supplementalDataIDLastConsumed={},_.getSupplementalDataID=function(e,t){_._supplementalDataIDCurrent||t||(_._supplementalDataIDCurrent=_._generateID(1));var i=_._supplementalDataIDCurrent;return _._supplementalDataIDLast&&!_._supplementalDataIDLastConsumed[e]?(i=_._supplementalDataIDLast,_._supplementalDataIDLastConsumed[e]=!0):i&&(_._supplementalDataIDCurrentConsumed[e]&&(_._supplementalDataIDLast=_._supplementalDataIDCurrent,_._supplementalDataIDLastConsumed=_._supplementalDataIDCurrentConsumed,_._supplementalDataIDCurrent=i=t?"":_._generateID(1),_._supplementalDataIDCurrentConsumed={}),i&&(_._supplementalDataIDCurrentConsumed[e]=!0)),i},m.OptOut={GLOBAL:"global"},_.getOptOut=function(e,t){if(_.isAllowed()){var i=_._getAudienceManagerURLData("_setMarketingCloudFields"),n=i.url;return _._getRemoteField(E,n,e,t,i)}return""},_.isOptedOut=function(e,t,i){if(_.isAllowed()){t||(t=m.OptOut.GLOBAL);var n=_.getOptOut(function(i){var n=i===m.OptOut.GLOBAL||i.indexOf(t)>=0;_._callCallback(e,[n])},i);return n?n===m.OptOut.GLOBAL||n.indexOf(t)>=0:null}return!1},_.appendVisitorIDsTo=function(e){var t=C.ADOBE_MC,i=[[I,_._getField(I)],[T,_._getField(T)],[v,_.marketingCloudOrgID]],n=u(i);try{return _._addQuerystringParam(e,t,n)}catch(t){return e}},_.appendSupplementalDataIDTo=function(e,t){if(!(t=t||_.getSupplementalDataID(F.generateRandomString(),!0)))return e;var i=C.ADOBE_MC_SDID,n="SDID="+encodeURIComponent(t)+"|";n+=v+"="+encodeURIComponent(_.marketingCloudOrgID)+"|",n+="TS="+F.getTimestampInSeconds();try{return _._addQuerystringParam(e,i,n)}catch(t){return e}},_._xd={postMessage:function(e,t,i){var n=1;t&&(C.POST_MESSAGE_ENABLED?i.postMessage(e,t.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):t&&(i.location=t.replace(/#.*$/,"")+"#"+ +new Date+n+++"&"+e))},receiveMessage:function(e,t){var i;try{C.POST_MESSAGE_ENABLED&&(e&&(i=function(i){if("string"==typeof t&&i.origin!==t||"[object Function]"===Object.prototype.toString.call(t)&&!1===t(i.origin))return!1;e(i)}),p.addEventListener?p[e?"addEventListener":"removeEventListener"]("message",i,!1):p[e?"attachEvent":"detachEvent"]("",i))}catch(e){}}};var F={addListener:function(){return h.addEventListener?function(e,t,i){e.addEventListener(t,function(e){"function"==typeof i&&i(e)},!1)}:h.attachEvent?function(e,t,i){e.attachEvent("on"+t,function(e){"function"==typeof i&&i(e)})}:void 0}(),map:function(e,t){if(Array.prototype.map)return e.map(t);if(void 0===e||null==e)throw new TypeError;var i=Object(e),n=i.length>>>0;if("function"!=typeof t)throw new TypeError;for(var r=new Array(n),a=arguments[1],s=0;s<n;s++)s in i&&(r[s]=t.call(a,i[s],s,i));return r},encodeAndBuildRequest:function(e,t){return this.map(e,function(e){return encodeURIComponent(e)}).join(t)},parseHash:function(e){var t=e.indexOf("#");return t>0?e.substr(t):""},hashlessUrl:function(e){var t=e.indexOf("#");return t>0?e.substr(0,t):e},addQueryParamAtLocation:function(e,t,i){var n=e.split("&");return i=null!=i?i:n.length,n.splice(i,0,t),n.join("&")},isFirstPartyAnalyticsVisitorIDCall:function(e,t,i){if(e!==T)return!1;var n;return t||(t=_.trackingServer),i||(i=_.trackingServerSecure),!("string"!=typeof(n=_.loadSSL?i:t)||!n.length)&&(n.indexOf("2o7.net")<0&&n.indexOf("omtrdc.net")<0)},isObject:function(e){return Boolean(e&&e===Object(e))},isLessThan:function(e,t){return _._compareVersions(e,t)<0},areVersionsDifferent:function(e,t){return 0!==_._compareVersions(e,t)},removeCookie:function(e){document.cookie=encodeURIComponent(e)+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"},isTrackingServerPopulated:function(){return!!_.trackingServer||!!_.trackingServerSecure},parseJSON:function(e,t){function i(e,n){var r,a,s=e[n];if(s&&"object"==typeof s)for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(a=i(s,r),void 0!==a?s[r]=a:delete s[r]);return t.call(e,n,s)}if("object"==typeof JSON&&"function"==typeof JSON.parse)return JSON.parse(e,t);var n,r=/^[\],:{}\s]*$/,a=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,s=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,o=/(?:^|:|,)(?:\s*\[)+/g,l=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;if(e=String(e),l.lastIndex=0,l.test(e)&&(e=e.replace(l,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),r.test(e.replace(a,"@").replace(s,"]").replace(o,"")))return n=eval("("+e+")"),"function"==typeof t?i({"":n},""):n;throw new SyntaxError("JSON.parse")},getTimestampInSeconds:function(){return Math.round((new Date).getTime()/1e3)},parsePipeDelimetedKeyValues:function(e){for(var t={},i=e.split("|"),n=0,r=i.length;n<r;n++){var a=i[n].split("=");t[a[0]]=decodeURIComponent(a[1])}return t},generateRandomString:function(e){e=e||5;for(var t="",i="abcdefghijklmnopqrstuvwxyz0123456789";e--;)t+=i[Math.floor(Math.random()*i.length)];return t},parseBoolean:function(e){return"true"===e||"false"!==e&&null}};_._helpers=F;var w={corsMetadata:function(){var e="none",t=!0;return"undefined"!=typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&("withCredentials"in new XMLHttpRequest?e="XMLHttpRequest":"undefined"!=typeof XDomainRequest&&XDomainRequest===Object(XDomainRequest)&&(t=!1),Object.prototype.toString.call(p.HTMLElement).indexOf("Constructor")>0&&(t=!1)),{corsType:e,corsCookiesEnabled:t}}(),getCORSInstance:function(){return"none"===this.corsMetadata.corsType?null:new p[this.corsMetadata.corsType]},fireCORS:function(e,t,i){function n(t){var i;try{if((i=JSON.parse(t))!==Object(i))return void r.handleCORSError(e,null,"Response is not JSON")}catch(t){return void r.handleCORSError(e,t,"Error parsing response as JSON")}try{for(var n=e.callback,a=p,s=0;s<n.length;s++)a=a[n[s]];a(i)}catch(t){r.handleCORSError(e,t,"Error forming callback function")}}var r=this;t&&(e.loadErrorHandler=t);try{var a=this.getCORSInstance();a.open("get",e.corsUrl+"&ts="+(new Date).getTime(),!0),"XMLHttpRequest"===this.corsMetadata.corsType&&(a.withCredentials=!0,a.timeout=_.loadTimeout,a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.onreadystatechange=function(){4===this.readyState&&200===this.status&&n(this.responseText)}),a.onerror=function(t){r.handleCORSError(e,t,"onerror")},a.ontimeout=function(t){r.handleCORSError(e,t,"ontimeout")},a.send(),_._log.requests.push(e.corsUrl)}catch(t){this.handleCORSError(e,t,"try-catch")}},handleCORSError:function(e,t,i){_.CORSErrors.push({corsData:e,error:t,description:i}),e.loadErrorHandler&&("ontimeout"===i?e.loadErrorHandler(!0):e.loadErrorHandler(!1))}};_._requestProcs=w;var N={THROTTLE_START:3e4,MAX_SYNCS_LENGTH:649,throttleTimerSet:!1,id:null,onPagePixels:[],iframeHost:null,getIframeHost:function(e){if("string"==typeof e){var t=e.split("/");return t[0]+"//"+t[2]}},subdomain:null,url:null,getUrl:function(){var e,t="http://fast.",i="?d_nsid="+_.idSyncContainerID+"#"+encodeURIComponent(h.location.href);return this.subdomain||(this.subdomain="nosubdomainreturned"),_.loadSSL&&(t=_.idSyncSSLUseAkamai?"https://fast.":"https://"),e=t+this.subdomain+".demdex.net/dest5.html"+i,this.iframeHost=this.getIframeHost(e),this.id="destination_publishing_iframe_"+this.subdomain+"_"+_.idSyncContainerID,e},checkDPIframeSrc:function(){var e="?d_nsid="+_.idSyncContainerID+"#"+encodeURIComponent(h.location.href);"string"==typeof _.dpIframeSrc&&_.dpIframeSrc.length&&(this.id="destination_publishing_iframe_"+(_._subdomain||this.subdomain||(new Date).getTime())+"_"+_.idSyncContainerID,this.iframeHost=this.getIframeHost(_.dpIframeSrc),this.url=_.dpIframeSrc+e)},idCallNotProcesssed:null,doAttachIframe:!1,startedAttachingIframe:!1,iframeHasLoaded:null,iframeIdChanged:null,newIframeCreated:null,originalIframeHasLoadedAlready:null,regionChanged:!1,timesRegionChanged:0,sendingMessages:!1,messages:[],messagesPosted:[],messagesReceived:[],messageSendingInterval:C.POST_MESSAGE_ENABLED?null:100,jsonForComparison:[],jsonDuplicates:[],jsonWaiting:[],jsonProcessed:[],canSetThirdPartyCookies:!0,receivedThirdPartyCookiesNotification:!1,readyToAttachIframe:function(){return!_.idSyncDisable3rdPartySyncing&&(this.doAttachIframe||_._doAttachIframe)&&(this.subdomain&&"nosubdomainreturned"!==this.subdomain||_._subdomain)&&this.url&&!this.startedAttachingIframe},attachIframe:function(){function e(){n=document.createElement("iframe"),n.sandbox="allow-scripts allow-same-origin",n.title="Adobe ID Syncing iFrame",n.id=i.id,n.name=i.id+"_name",n.style.cssText="display: none; width: 0; height: 0;",n.src=i.url,i.newIframeCreated=!0,t(),document.body.appendChild(n)}function t(){F.addListener(n,"load",function(){n.className="aamIframeLoaded",i.iframeHasLoaded=!0,i.requestToProcess()})}this.startedAttachingIframe=!0;var i=this,n=document.getElementById(this.id);n?"IFRAME"!==n.nodeName?(this.id+="_2",this.iframeIdChanged=!0,e()):(this.newIframeCreated=!1,"aamIframeLoaded"!==n.className?(this.originalIframeHasLoadedAlready=!1,t()):(this.originalIframeHasLoadedAlready=!0,this.iframeHasLoaded=!0,this.iframe=n,this.requestToProcess())):e(),this.iframe=n},requestToProcess:function(e){function t(){n.jsonForComparison.push(e),n.jsonWaiting.push(e),n.processSyncOnPage(e)}var i,n=this;if(e===Object(e)&&e.ibs)if(C.HAS_JSON_STRINGIFY)if(i=JSON.stringify(e.ibs||[]),this.jsonForComparison.length){var r,a,s,o=!1;for(r=0,a=this.jsonForComparison.length;r<a;r++)if(s=this.jsonForComparison[r],i===JSON.stringify(s.ibs||[])){o=!0;break}o?this.jsonDuplicates.push(e):t()}else t();else t();if((this.receivedThirdPartyCookiesNotification||!C.POST_MESSAGE_ENABLED||this.iframeHasLoaded)&&this.jsonWaiting.length){var l=this.jsonWaiting.shift();this.process(l),this.requestToProcess()}!_.idSyncDisableSyncs&&this.iframeHasLoaded&&this.messages.length&&!this.sendingMessages&&(this.throttleTimerSet||(this.throttleTimerSet=!0,setTimeout(function(){n.messageSendingInterval=C.POST_MESSAGE_ENABLED?null:150},this.THROTTLE_START)),this.sendingMessages=!0,this.sendMessages())},getRegionAndCheckIfChanged:function(e,t){var i=_._getField(L),n=e.d_region||e.dcs_region;return i?n&&(_._setFieldExpire(L,t),_._setField(L,n),parseInt(i,10)!==n&&(this.regionChanged=!0,this.timesRegionChanged++,_._setField(M,""),_._setField(y,""),i=n)):(i=n)&&(_._setFieldExpire(L,t),_._setField(L,i)),i||(i=""),i},processSyncOnPage:function(e){var t,i,n,r;if((t=e.ibs)&&t instanceof Array&&(i=t.length))for(n=0;n<i;n++)r=t[n],r.syncOnPage&&this.checkFirstPartyCookie(r,"","syncOnPage")},process:function(e){var t,i,n,r,a,s=encodeURIComponent,o=!1;if((t=e.ibs)&&t instanceof Array&&(i=t.length))for(o=!0,n=0;n<i;n++)r=t[n],a=[s("ibs"),s(r.id||""),s(r.tag||""),F.encodeAndBuildRequest(r.url||[],","),s(r.ttl||""),"","",r.fireURLSync?"true":"false"],r.syncOnPage||(this.canSetThirdPartyCookies?this.addMessage(a.join("|")):r.fireURLSync&&this.checkFirstPartyCookie(r,a.join("|")));o&&this.jsonProcessed.push(e)},checkFirstPartyCookie:function(e,t,i){var n="syncOnPage"===i,r=n?M:y;_._readVisitor();var a,s,o=_._getField(r),l=!1,u=!1,c=Math.ceil((new Date).getTime()/C.MILLIS_PER_DAY);o?(a=o.split("*"),s=this.pruneSyncData(a,e.id,c),l=s.dataPresent,u=s.dataValid,l&&u||this.fireSync(n,e,t,a,r,c)):(a=[],this.fireSync(n,e,t,a,r,c))},pruneSyncData:function(e,t,i){var n,r,a,s=!1,o=!1;for(r=0;r<e.length;r++)n=e[r],a=parseInt(n.split("-")[1],10),n.match("^"+t+"-")?(s=!0,i<a?o=!0:(e.splice(r,1),r--)):i>=a&&(e.splice(r,1),r--);return{dataPresent:s,dataValid:o}},manageSyncsSize:function(e){if(e.join("*").length>this.MAX_SYNCS_LENGTH)for(e.sort(function(e,t){return parseInt(e.split("-")[1],10)-parseInt(t.split("-")[1],10)});e.join("*").length>this.MAX_SYNCS_LENGTH;)e.shift()},fireSync:function(e,t,i,n,r,a){var s=this;if(e){if("img"===t.tag){var o,l,u,c,d=t.url,f=_.loadSSL?"https:":"http:";for(o=0,l=d.length;o<l;o++){u=d[o],c=/^\/\//.test(u);var g=new Image;F.addListener(g,"load",function(e,t,i,n){return function(){s.onPagePixels[e]=null,_._readVisitor();var a,o=_._getField(r),l=[];if(o){a=o.split("*");var u,c,d;for(u=0,c=a.length;u<c;u++)d=a[u],d.match("^"+t.id+"-")||l.push(d)}s.setSyncTrackingData(l,t,i,n)}}(this.onPagePixels.length,t,r,a)),g.src=(c?f:"")+u,this.onPagePixels.push(g)}}}else this.addMessage(i),this.setSyncTrackingData(n,t,r,a)},addMessage:function(e){var t=encodeURIComponent,i=t(_._enableErrorReporting?"---destpub-debug---":"---destpub---");this.messages.push((C.POST_MESSAGE_ENABLED?"":i)+e)},setSyncTrackingData:function(e,t,i,n){e.push(t.id+"-"+(n+Math.ceil(t.ttl/60/24))),this.manageSyncsSize(e),_._setField(i,e.join("*"))},sendMessages:function(){var e,t=this,i="",n=encodeURIComponent;this.regionChanged&&(i=n("---destpub-clear-dextp---"),this.regionChanged=!1),this.messages.length?C.POST_MESSAGE_ENABLED?(e=i+n("---destpub-combined---")+this.messages.join("%01"),this.postMessage(e),this.messages=[],this.sendingMessages=!1):(e=this.messages.shift(),this.postMessage(i+e),setTimeout(function(){t.sendMessages()},this.messageSendingInterval)):this.sendingMessages=!1},postMessage:function(e){_._xd.postMessage(e,this.url,this.iframe.contentWindow),this.messagesPosted.push(e)},receiveMessage:function(e){var t,i=/^---destpub-to-parent---/;"string"==typeof e&&i.test(e)&&(t=e.replace(i,"").split("|"),"canSetThirdPartyCookies"===t[0]&&(this.canSetThirdPartyCookies="true"===t[1],this.receivedThirdPartyCookiesNotification=!0,this.requestToProcess()),this.messagesReceived.push(e))},processIDCallData:function(e){
(null==this.url||e.subdomain&&"nosubdomainreturned"===this.subdomain)&&("string"==typeof _._subdomain&&_._subdomain.length?this.subdomain=_._subdomain:this.subdomain=e.subdomain||"",this.url=this.getUrl()),e.ibs instanceof Array&&e.ibs.length&&(this.doAttachIframe=!0),this.readyToAttachIframe()&&(_.idSyncAttachIframeOnWindowLoad?(m.windowLoaded||"complete"===h.readyState||"loaded"===h.readyState)&&this.attachIframe():this.attachIframeASAP()),"function"==typeof _.idSyncIDCallResult?_.idSyncIDCallResult(e):this.requestToProcess(e),"function"==typeof _.idSyncAfterIDCallResult&&_.idSyncAfterIDCallResult(e)},canMakeSyncIDCall:function(e,t){return _._forceSyncIDCall||!e||t-e>C.DAYS_BETWEEN_SYNC_ID_CALLS},attachIframeASAP:function(){function e(){t.startedAttachingIframe||(document.body?t.attachIframe():setTimeout(e,30))}var t=this;e()}};_._destinationPublishing=N,_.timeoutMetricsLog=[];var x,V={isClientSideMarketingCloudVisitorID:null,MCIDCallTimedOut:null,AnalyticsIDCallTimedOut:null,AAMIDCallTimedOut:null,fieldGroupObj:{},setState:function(e,t){switch(e){case D:!1===t?!0!==this.MCIDCallTimedOut&&(this.MCIDCallTimedOut=!1):this.MCIDCallTimedOut=t;break;case O:!1===t?!0!==this.AnalyticsIDCallTimedOut&&(this.AnalyticsIDCallTimedOut=!1):this.AnalyticsIDCallTimedOut=t;break;case k:!1===t?!0!==this.AAMIDCallTimedOut&&(this.AAMIDCallTimedOut=!1):this.AAMIDCallTimedOut=t}}};_.isClientSideMarketingCloudVisitorID=function(){return V.isClientSideMarketingCloudVisitorID},_.MCIDCallTimedOut=function(){return V.MCIDCallTimedOut},_.AnalyticsIDCallTimedOut=function(){return V.AnalyticsIDCallTimedOut},_.AAMIDCallTimedOut=function(){return V.AAMIDCallTimedOut},_.idSyncGetOnPageSyncInfo=function(){return _._readVisitor(),_._getField(M)},_.idSyncByURL=function(e){var t=c(e||{});if(t.error)return t.error;var i,n,r=e.url,a=encodeURIComponent,s=N;return r=r.replace(/^https:/,"").replace(/^http:/,""),i=F.encodeAndBuildRequest(["",e.dpid,e.dpuuid||""],","),n=["ibs",a(e.dpid),"img",a(r),t.ttl,"",i],s.addMessage(n.join("|")),s.requestToProcess(),"Successfully queued"},_.idSyncByDataSource=function(e){return e===Object(e)&&"string"==typeof e.dpuuid&&e.dpuuid.length?(e.url="//dpm.demdex.net/ibs:dpid="+e.dpid+"&dpuuid="+e.dpuuid,_.idSyncByURL(e)):"Error: config or config.dpuuid is empty"},_._compareVersions=function(e,t){if(e===t)return 0;var i=e.toString().split("."),n=t.toString().split(".");return d(i.concat(n))?(f(i,n),g(i,n)):NaN},_._getCookieVersion=function(e){e=e||_.cookieRead(_.cookieName);var t=C.VERSION_REGEX.exec(e);return t&&t.length>1?t[1]:null},_._resetAmcvCookie=function(e){var t=_._getCookieVersion();t&&!F.isLessThan(t,e)||F.removeCookie(_.cookieName)},_.setAsCoopSafe=function(){U=!0},_.setAsCoopUnsafe=function(){U=!1},e.indexOf("@")<0&&(e+="@AdobeOrg"),_.marketingCloudOrgID=e,_.cookieName="AMCV_"+e,_.sessionCookieName="AMCVS_"+e,_.cookieDomain=_._getDomain(),_.cookieDomain===p.location.hostname&&(_.cookieDomain=""),_.loadSSL=p.location.protocol.toLowerCase().indexOf("https")>=0,_.loadTimeout=3e4,_.CORSErrors=[],_.marketingCloudServer=_.audienceManagerServer="dpm.demdex.net",_.sdidParamExpiry=30;var j={};j[L]=!0,j[P]=!0;var U=null;if(t&&"object"==typeof t){var H;for(H in t)S(H)&&(_[H]=t[H]);_.idSyncContainerID=_.idSyncContainerID||0,U="boolean"==typeof _.isCoopSafe?_.isCoopSafe:F.parseBoolean(_.isCoopSafe),_.resetBeforeVersion&&_._resetAmcvCookie(_.resetBeforeVersion),_._attemptToPopulateIdsFromUrl(),_._attemptToPopulateSdidFromUrl(),_._readVisitor();var B=_._getField(b),G=Math.ceil((new Date).getTime()/C.MILLIS_PER_DAY);!_.idSyncDisableSyncs&&N.canMakeSyncIDCall(B,G)&&(_._setFieldExpire(P,-1),_._setField(b,G)),_.getMarketingCloudVisitorID(),_.getAudienceManagerLocationHint(),_.getAudienceManagerBlob(),_._mergeServerState(_.serverState)}else _._attemptToPopulateIdsFromUrl(),_._attemptToPopulateSdidFromUrl();if(!_.idSyncDisableSyncs){N.checkDPIframeSrc();var q=function(){var e=N;e.readyToAttachIframe()&&e.attachIframe()};F.addListener(p,"load",function(){m.windowLoaded=!0,q()});try{_._xd.receiveMessage(function(e){N.receiveMessage(e.data)},N.iframeHost)}catch(e){}}_.whitelistIframeDomains&&C.POST_MESSAGE_ENABLED&&(_.whitelistIframeDomains=_.whitelistIframeDomains instanceof Array?_.whitelistIframeDomains:[_.whitelistIframeDomains],_.whitelistIframeDomains.forEach(function(t){var i=new a(e,t),n=s(_,i);_._xd.receiveMessage(n,t)}))};l.getInstance=function(e,t){if(!e)throw new Error("Visitor requires Adobe Marketing Cloud Org ID");e.indexOf("@")<0&&(e+="@AdobeOrg");var n=function(){var t=i.s_c_il;if(t)for(var n=0;n<t.length;n++){var r=t[n];if(r&&"Visitor"===r._c&&r.marketingCloudOrgID===e)return r}}();if(n)return n;var a=new l(e),s=a.isAllowed();return function(){i.s_c_il.splice(--i.s_c_in,1)}(),function(){try{return i.self!==i.parent}catch(e){return!0}}()&&!s&&i.parent?new r(e,t,a,i.parent):new l(e,t)},n(),i.Visitor=l,t.exports=l}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ChildVisitor":1,"./Message":2,"./utils/asyncParallelApply":8,"./utils/makeChildMessageListener":10}],4:[function(e,t,i){i.MESSAGES={HANDSHAKE:"HANDSHAKE",GETSTATE:"GETSTATE",PARENTSTATE:"PARENTSTATE"},i.STATE_KEYS_MAP={MCMID:"MCMID",MCAID:"MCAID",MCAAMB:"MCAAMB",MCAAMLH:"MCAAMLH",MCOPTOUT:"MCOPTOUT",CUSTOMERIDS:"CUSTOMERIDS"},i.ASYNC_API_MAP={MCMID:"getMarketingCloudVisitorID",MCAID:"getAnalyticsVisitorID",MCAAMB:"getAudienceManagerBlob",MCAAMLH:"getAudienceManagerLocationHint",MCOPTOUT:"getOptOut"},i.SYNC_API_MAP={CUSTOMERIDS:"getCustomerIDs"},i.ALL_APIS={MCMID:"getMarketingCloudVisitorID",MCAAMB:"getAudienceManagerBlob",MCAAMLH:"getAudienceManagerLocationHint",MCOPTOUT:"getOptOut",MCAID:"getAnalyticsVisitorID",CUSTOMERIDS:"getCustomerIDs"},i.FIELDGROUP_TO_FIELD={MC:"MCMID",A:"MCAID",AAM:"MCAAMB"}},{}],5:[function(e,t,i){var n=e("../enums"),r=n.STATE_KEYS_MAP;t.exports=function(e){function t(){}function i(t,i){var n=this;return function(){var t=e(0,r.MCMID),a={};return a[r.MCMID]=t,n.setStateAndPublish(a),i(t),t}}this.getMarketingCloudVisitorID=function(e){e=e||t;var n=this.findField(r.MCMID,e),a=i.call(this,r.MCMID,e);return void 0!==n?n:a()}}},{"../enums":4}],6:[function(e,t,i){var n=e("../enums"),r=n.ASYNC_API_MAP;t.exports=function(){Object.keys(r).forEach(function(e){this[r[e]]=function(t){this.callbackRegistry.add(e,t)}},this)}},{"../enums":4}],7:[function(e,t,i){var n=e("../enums"),r=n.MESSAGES,a=n.ASYNC_API_MAP,s=n.SYNC_API_MAP;t.exports=function(){function e(){}function t(e,t){var i=this;return function(){return i.callbackRegistry.add(e,t),i.messageParent(r.GETSTATE),""}}function i(i){this[a[i]]=function(n){n=n||e;var r=this.findField(i,n),a=t.call(this,i,n);return void 0!==r?r:a()}}function n(t){this[s[t]]=function(){return this.findField(t,e)||{}}}Object.keys(a).forEach(i,this),Object.keys(s).forEach(n,this)}},{"../enums":4}],8:[function(e,t,i){t.exports=function(e,t){function i(e){return function(i){n[e]=i,r++,r===a&&t(n)}}var n={},r=0,a=Object.keys(e).length;Object.keys(e).forEach(function(t){var n=e[t];if(n.fn){var r=n.args||[];r.unshift(i(t)),n.fn.apply(n.context||null,r)}})}},{}],9:[function(e,t,i){function n(){return{callbacks:{},add:function(e,t){this.callbacks[e]=this.callbacks[e]||[];var i=this.callbacks[e].push(t)-1;return function(){this.callbacks[e].splice(i,1)}},execute:function(e,t){if(this.callbacks[e]){t=void 0===t?[]:t,t=t instanceof Array?t:[t];try{for(;this.callbacks[e].length;){var i=this.callbacks[e].shift();"function"==typeof i?i.apply(null,t):i instanceof Array&&i[1].apply(i[0],t)}delete this.callbacks[e]}catch(e){}}},executeAll:function(e,t){(t||e&&!r.isObjectEmpty(e))&&Object.keys(this.callbacks).forEach(function(t){var i=void 0!==e[t]?e[t]:"";this.execute(t,i)},this)},hasCallbacks:function(){return Boolean(Object.keys(this.callbacks).length)}}}var r=e("./utils");t.exports=n},{"./utils":12}],10:[function(e,t,i){var n=e("../enums"),r=e("./utils"),a=n.MESSAGES,s=n.ALL_APIS,o=n.ASYNC_API_MAP,l=n.FIELDGROUP_TO_FIELD;t.exports=function(e,t){function i(){var t={};return Object.keys(s).forEach(function(i){var n=s[i],a=e[n]();r.isValueEmpty(a)||(t[i]=a)}),t}function n(){var t=[];return e._loading&&Object.keys(e._loading).forEach(function(i){if(e._loading[i]){var n=l[i];t.push(n)}}),t.length?t:null}function u(t){return function i(r){var a=n();if(a){var s=o[a[0]];e[s](i,!0)}else t()}}function c(e,n){var r=i();t.send(e,n,r)}function d(e){g(e),c(e,a.HANDSHAKE)}function f(e){u(function(){c(e,a.PARENTSTATE)})()}function g(i){function n(n){r.call(e,n),t.send(i,a.PARENTSTATE,{CUSTOMERIDS:e.getCustomerIDs()})}var r=e.setCustomerIDs;e.setCustomerIDs=n}return function(e){if(!t.isInvalid(e)){(t.parse(e).prefix===a.HANDSHAKE?d:f)(e.source)}}}},{"../enums":4,"./utils":12}],11:[function(e,t,i){Object.keys=Object.keys||function(e){var t=[];for(var i in e)t.hasOwnProperty.call(e,i)&&t.push(i);return t},Array.prototype.forEach=Array.prototype.forEach||function(e,t){for(var i=this,n=0,r=i.length;n<r;n++)e.call(t,i[n],n,i)},Object.assign=Object.assign||function(e){for(var t,i,n=1;n<arguments.length;++n){i=arguments[n];for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e}},{}],12:[function(e,t,i){i.isObjectEmpty=function(e){return e===Object(e)&&0===Object.keys(e).length},i.isValueEmpty=function(e){return""===e||i.isObjectEmpty(e)}},{}]},{},[1,2,3,4]);

/* s init */

var s = s_gi(prmOm.account);

s.cookieDomainPeriods = prmOm.cookieDomainPeriods;
s.visitor = Visitor.getInstance('983502BE532960BE0A490D4C@AdobeOrg', {
	trackingServer: prmOm.trackingServer,
	trackingServerSecure: prmOm.trackingServerSecure,
	cookieDomain: prmOm.cookieDomain
});
s.charSet = prmOm.pageCharset;
s.trackInlineStats = false;
s.linkLeaveQueryString = true;
s.trackDownloadLinks = false;
s.trackExternalLinks = false;
s.linkInternalFilters = '';
s.linkTrackVars = '';
s.linkTrackEvents = '';
s.useForcedLinkTracking = true;
s.forcedLinkTrackingTimeout = 250;
s.usePlugins = false;
s.visitorNamespace = 'kaspersky';
s.dc = 122;
s.trackingServer = prmOm.trackingServer;
s.trackingServerSecure = prmOm.trackingServerSecure;

/*
 * Plugin: getQueryParam 2.3
 */
s.getQueryParam=new Function("p","d","u",""
+"var s=this,v='',i,t;d=d?d:'';u=u?u:(s.pageURL?s.pageURL:s.wd.locati"
+"on);if(u=='f')u=s.gtfs().location;while(p){i=p.indexOf(',');i=i<0?p"
+".length:i;t=s.p_gpv(p.substring(0,i),u+'');if(t){t=t.indexOf('#')>-"
+"1?t.substring(0,t.indexOf('#')):t;}if(t)v+=v?d+t:t;p=p.substring(i="
+"=p.length?i:i+1)}return v");
s.p_gpv=new Function("k","u",""
+"var s=this,v='',i=u.indexOf('?'),q;if(k&&i>-1){q=u.substring(i+1);v"
+"=s.pt(q,'&','p_gvf',k)}return v");
s.p_gvf=new Function("t","k",""
+"if(t){var s=this,i=t.indexOf('='),p=i<0?t:t.substring(0,i),v=i<0?'T"
+"rue':t.substring(i+1);if(p.toLowerCase()==k.toLowerCase())return s."
+"epa(v)}return ''");

/*
* Plugin Utility: apl v1.1
*/
s.apl=new Function("L","v","d","u",""
+"var s=this,m=0;if(!L)L='';if(u){var i,n,a=s.split(L,d);for(i=0;i<a."
+"length;i++){n=a[i];m=m||(u==1?(n==v):(n.toLowerCase()==v.toLowerCas"
+"e()));}}if(!m)L=L?L+d+v:v;return L");

/*
 * Utility Function: split v1.5 - split a string (JS 1.0 compatible)
 */
s.split=new Function("l","d",""
+"var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i>-1?i:l.length;a[x"
+"++]=l.substring(0,i);l=l.substring(i+d.length);}return a");

/*
 * Utility Function: join
 */
s.join = new Function("v","p",""
+"var s = this;var f,b,d,w;if(p){f=p.front?p.front:'';b=p.back?p.back"
+":'';d=p.delim?p.delim:'';w=p.wrap?p.wrap:'';}var str='';for(var x=0"
+";x<v.length;x++){if(typeof(v[x])=='object' )str+=s.join( v[x],p);el"
+"se str+=w+v[x]+w;if(x<v.length-1)str+=d;}return f+str+b;");

/*
 * Plugin Utility: Replace v1.0
 */
s.repl=new Function("x","o","n",""
+"var i=x.indexOf(o),l=n.length;while(x&&i>=0){x=x.substring(0,i)+n+x."
+"substring(i+o.length);i=x.indexOf(o,i+l)}return x");

/*
 * Plugins: getCartOpen, resetGetCartOpen, getCheckout
 */
s.getCartOpen=new Function("c",""
+"var s=this,t=new Date,e=s.events?s.events:'',i=0;t.setTime(t.getTim"
+"e()+1800000);if(s.Util.cookieRead(c)||e.indexOf('scOpen')>-1){if(!s.Util.cookieWrite(c,1,t))"
+"{s.Util.cookieWrite(c,1,0)}}else{if(e.indexOf('scAdd')>-1){if(s.Util.cookieWrite(c,1,t)){i=1}"
+"else if(s.Util.cookieWrite(c,1,0)){i=1}}}if(i){e=e+',scOpen'}return e");
s.resetGetCartOpen=new Function("c",""
+"var s=this,t=new Date,e=s.events?s.events:'';t.setTime(t.getTime()+"
+"10000);if(e.indexOf('purchase')>-1){if(s.Util.cookieRead(c)||e.indexOf('scOpen'"
+")>-1){if(!s.Util.cookieWrite(c,'',t)){s.Util.cookieWrite(c,'',0);}}}return e");
s.getCheckout=new Function("c",""
+"var s=this,t=new Date,e=s.events?s.events:'';t.setTime(t.getTime()+"
+"1800000);if(e.indexOf('scCheckout')>-1){if(s.Util.cookieRead(c)){e=s.repl(s.rep"
+"l(e,'scCheckout',''),',,',',')}if(!s.Util.cookieWrite(c,1,t)){s.Util.cookieWrite(c,1,0)}}t.se"
+"tTime(t.getTime()+10000);if(s.Util.cookieRead(c)&&e.indexOf('purchase')>-1){if("
+"!s.Util.cookieWrite(c,'',t)){s.Util.cookieWrite(c,'',0);}}return e");

/*
prmOm.jsInitEndTime = new Date().getTime();
console.log('OMNITURE: jsInit = ' + (prmOm.jsInitEndTime - prmOm.jsInitStartTime) + ' ms');
omRemoveCookie('omJsInitStartTime');
*/

// Auto Tracking Page View On Load

if (kaspersky.trackPageViewOnLoad !== 0 && prmOm.siteType != 'IFrame') { // HOTFIX
	trackPageView(kaspersky.pageName || kaspersky.pagename);
}

if (kaspersky['execute'] == 1) { // TODO Remove - Maybe not in use
	s.t();
}

/*
 ============== DO NOT ALTER ANYTHING BELOW THIS LINE ! ===============

AppMeasurement for JavaScript version: 2.6.0
Copyright 1996-2016 Adobe, Inc. All Rights Reserved
More info available at http://www.adobe.com/marketing-cloud.html
*/
function AppMeasurement(r){var a=this;a.version="2.6.0";var k=window;k.s_c_in||(k.s_c_il=[],k.s_c_in=0);a._il=k.s_c_il;a._in=k.s_c_in;a._il[a._in]=a;k.s_c_in++;a._c="s_c";var p=k.AppMeasurement.Pb;p||(p=null);var n=k,m,s;try{for(m=n.parent,s=n.location;m&&m.location&&s&&""+m.location!=""+s&&n.location&&""+m.location!=""+n.location&&m.location.host==s.host;)n=m,m=n.parent}catch(u){}a.F=function(a){try{console.log(a)}catch(b){}};a.Ma=function(a){return""+parseInt(a)==""+a};a.replace=function(a,b,d){return!a||
0>a.indexOf(b)?a:a.split(b).join(d)};a.escape=function(c){var b,d;if(!c)return c;c=encodeURIComponent(c);for(b=0;7>b;b++)d="+~!*()'".substring(b,b+1),0<=c.indexOf(d)&&(c=a.replace(c,d,"%"+d.charCodeAt(0).toString(16).toUpperCase()));return c};a.unescape=function(c){if(!c)return c;c=0<=c.indexOf("+")?a.replace(c,"+"," "):c;try{return decodeURIComponent(c)}catch(b){}return unescape(c)};a.wb=function(){var c=k.location.hostname,b=a.fpCookieDomainPeriods,d;b||(b=a.cookieDomainPeriods);if(c&&!a.Ea&&!/^[0-9.]+$/.test(c)&&
(b=b?parseInt(b):2,b=2<b?b:2,d=c.lastIndexOf("."),0<=d)){for(;0<=d&&1<b;)d=c.lastIndexOf(".",d-1),b--;a.Ea=0<d?c.substring(d):c}return a.Ea};a.c_r=a.cookieRead=function(c){c=a.escape(c);var b=" "+a.d.cookie,d=b.indexOf(" "+c+"="),f=0>d?d:b.indexOf(";",d);c=0>d?"":a.unescape(b.substring(d+2+c.length,0>f?b.length:f));return"[[B]]"!=c?c:""};a.c_w=a.cookieWrite=function(c,b,d){var f=a.wb(),e=a.cookieLifetime,g;b=""+b;e=e?(""+e).toUpperCase():"";d&&"SESSION"!=e&&"NONE"!=e&&((g=""!=b?parseInt(e?e:0):-60)?
(d=new Date,d.setTime(d.getTime()+1E3*g)):1==d&&(d=new Date,g=d.getYear(),d.setYear(g+5+(1900>g?1900:0))));return c&&"NONE"!=e?(a.d.cookie=a.escape(c)+"="+a.escape(""!=b?b:"[[B]]")+"; path=/;"+(d&&"SESSION"!=e?" expires="+d.toUTCString()+";":"")+(f?" domain="+f+";":""),a.cookieRead(c)==b):0};a.L=[];a.ia=function(c,b,d){if(a.Fa)return 0;a.maxDelay||(a.maxDelay=250);var f=0,e=(new Date).getTime()+a.maxDelay,g=a.d.visibilityState,h=["webkitvisibilitychange","visibilitychange"];g||(g=a.d.webkitVisibilityState);
if(g&&"prerender"==g){if(!a.ja)for(a.ja=1,d=0;d<h.length;d++)a.d.addEventListener(h[d],function(){var c=a.d.visibilityState;c||(c=a.d.webkitVisibilityState);"visible"==c&&(a.ja=0,a.delayReady())});f=1;e=0}else d||a.p("_d")&&(f=1);f&&(a.L.push({m:c,a:b,t:e}),a.ja||setTimeout(a.delayReady,a.maxDelay));return f};a.delayReady=function(){var c=(new Date).getTime(),b=0,d;for(a.p("_d")?b=1:a.xa();0<a.L.length;){d=a.L.shift();if(b&&!d.t&&d.t>c){a.L.unshift(d);setTimeout(a.delayReady,parseInt(a.maxDelay/2));
break}a.Fa=1;a[d.m].apply(a,d.a);a.Fa=0}};a.setAccount=a.sa=function(c){var b,d;if(!a.ia("setAccount",arguments))if(a.account=c,a.allAccounts)for(b=a.allAccounts.concat(c.split(",")),a.allAccounts=[],b.sort(),d=0;d<b.length;d++)0!=d&&b[d-1]==b[d]||a.allAccounts.push(b[d]);else a.allAccounts=c.split(",")};a.foreachVar=function(c,b){var d,f,e,g,h="";e=f="";if(a.lightProfileID)d=a.P,(h=a.lightTrackVars)&&(h=","+h+","+a.na.join(",")+",");else{d=a.g;if(a.pe||a.linkType)h=a.linkTrackVars,f=a.linkTrackEvents,
a.pe&&(e=a.pe.substring(0,1).toUpperCase()+a.pe.substring(1),a[e]&&(h=a[e].Nb,f=a[e].Mb));h&&(h=","+h+","+a.H.join(",")+",");f&&h&&(h+=",events,")}b&&(b=","+b+",");for(f=0;f<d.length;f++)e=d[f],(g=a[e])&&(!h||0<=h.indexOf(","+e+","))&&(!b||0<=b.indexOf(","+e+","))&&c(e,g)};a.r=function(c,b,d,f,e){var g="",h,l,k,q,m=0;"contextData"==c&&(c="c");if(b){for(h in b)if(!(Object.prototype[h]||e&&h.substring(0,e.length)!=e)&&b[h]&&(!d||0<=d.indexOf(","+(f?f+".":"")+h+","))){k=!1;if(m)for(l=0;l<m.length;l++)h.substring(0,
m[l].length)==m[l]&&(k=!0);if(!k&&(""==g&&(g+="&"+c+"."),l=b[h],e&&(h=h.substring(e.length)),0<h.length))if(k=h.indexOf("."),0<k)l=h.substring(0,k),k=(e?e:"")+l+".",m||(m=[]),m.push(k),g+=a.r(l,b,d,f,k);else if("boolean"==typeof l&&(l=l?"true":"false"),l){if("retrieveLightData"==f&&0>e.indexOf(".contextData."))switch(k=h.substring(0,4),q=h.substring(4),h){case "transactionID":h="xact";break;case "channel":h="ch";break;case "campaign":h="v0";break;default:a.Ma(q)&&("prop"==k?h="c"+q:"eVar"==k?h="v"+
q:"list"==k?h="l"+q:"hier"==k&&(h="h"+q,l=l.substring(0,255)))}g+="&"+a.escape(h)+"="+a.escape(l)}}""!=g&&(g+="&."+c)}return g};a.usePostbacks=0;a.zb=function(){var c="",b,d,f,e,g,h,l,k,q="",m="",n=e="";if(a.lightProfileID)b=a.P,(q=a.lightTrackVars)&&(q=","+q+","+a.na.join(",")+",");else{b=a.g;if(a.pe||a.linkType)q=a.linkTrackVars,m=a.linkTrackEvents,a.pe&&(e=a.pe.substring(0,1).toUpperCase()+a.pe.substring(1),a[e]&&(q=a[e].Nb,m=a[e].Mb));q&&(q=","+q+","+a.H.join(",")+",");m&&(m=","+m+",",q&&(q+=
",events,"));a.events2&&(n+=(""!=n?",":"")+a.events2)}if(a.visitor&&a.visitor.getCustomerIDs){e=p;if(g=a.visitor.getCustomerIDs())for(d in g)Object.prototype[d]||(f=g[d],"object"==typeof f&&(e||(e={}),f.id&&(e[d+".id"]=f.id),f.authState&&(e[d+".as"]=f.authState)));e&&(c+=a.r("cid",e))}a.AudienceManagement&&a.AudienceManagement.isReady()&&(c+=a.r("d",a.AudienceManagement.getEventCallConfigParams()));for(d=0;d<b.length;d++){e=b[d];g=a[e];f=e.substring(0,4);h=e.substring(4);g||("events"==e&&n?(g=n,n=
""):"marketingCloudOrgID"==e&&a.visitor&&(g=a.visitor.marketingCloudOrgID));if(g&&(!q||0<=q.indexOf(","+e+","))){switch(e){case "customerPerspective":e="cp";break;case "marketingCloudOrgID":e="mcorgid";break;case "supplementalDataID":e="sdid";break;case "timestamp":e="ts";break;case "dynamicVariablePrefix":e="D";break;case "visitorID":e="vid";break;case "marketingCloudVisitorID":e="mid";break;case "analyticsVisitorID":e="aid";break;case "audienceManagerLocationHint":e="aamlh";break;case "audienceManagerBlob":e=
"aamb";break;case "authState":e="as";break;case "pageURL":e="g";255<g.length&&(a.pageURLRest=g.substring(255),g=g.substring(0,255));break;case "pageURLRest":e="-g";break;case "referrer":e="r";break;case "vmk":case "visitorMigrationKey":e="vmt";break;case "visitorMigrationServer":e="vmf";a.ssl&&a.visitorMigrationServerSecure&&(g="");break;case "visitorMigrationServerSecure":e="vmf";!a.ssl&&a.visitorMigrationServer&&(g="");break;case "charSet":e="ce";break;case "visitorNamespace":e="ns";break;case "cookieDomainPeriods":e=
"cdp";break;case "cookieLifetime":e="cl";break;case "variableProvider":e="vvp";break;case "currencyCode":e="cc";break;case "channel":e="ch";break;case "transactionID":e="xact";break;case "campaign":e="v0";break;case "latitude":e="lat";break;case "longitude":e="lon";break;case "resolution":e="s";break;case "colorDepth":e="c";break;case "javascriptVersion":e="j";break;case "javaEnabled":e="v";break;case "cookiesEnabled":e="k";break;case "browserWidth":e="bw";break;case "browserHeight":e="bh";break;
case "connectionType":e="ct";break;case "homepage":e="hp";break;case "events":n&&(g+=(""!=g?",":"")+n);if(m)for(h=g.split(","),g="",f=0;f<h.length;f++)l=h[f],k=l.indexOf("="),0<=k&&(l=l.substring(0,k)),k=l.indexOf(":"),0<=k&&(l=l.substring(0,k)),0<=m.indexOf(","+l+",")&&(g+=(g?",":"")+h[f]);break;case "events2":g="";break;case "contextData":c+=a.r("c",a[e],q,e);g="";break;case "lightProfileID":e="mtp";break;case "lightStoreForSeconds":e="mtss";a.lightProfileID||(g="");break;case "lightIncrementBy":e=
"mti";a.lightProfileID||(g="");break;case "retrieveLightProfiles":e="mtsr";break;case "deleteLightProfiles":e="mtsd";break;case "retrieveLightData":a.retrieveLightProfiles&&(c+=a.r("mts",a[e],q,e));g="";break;default:a.Ma(h)&&("prop"==f?e="c"+h:"eVar"==f?e="v"+h:"list"==f?e="l"+h:"hier"==f&&(e="h"+h,g=g.substring(0,255)))}g&&(c+="&"+e+"="+("pev"!=e.substring(0,3)?a.escape(g):g))}"pev3"==e&&a.e&&(c+=a.e)}return c};a.D=function(a){var b=a.tagName;if("undefined"!=""+a.Sb||"undefined"!=""+a.Ib&&"HTML"!=
(""+a.Ib).toUpperCase())return"";b=b&&b.toUpperCase?b.toUpperCase():"";"SHAPE"==b&&(b="");b&&(("INPUT"==b||"BUTTON"==b)&&a.type&&a.type.toUpperCase?b=a.type.toUpperCase():!b&&a.href&&(b="A"));return b};a.Ia=function(a){var b=k.location,d=a.href?a.href:"",f,e,g;f=d.indexOf(":");e=d.indexOf("?");g=d.indexOf("/");d&&(0>f||0<=e&&f>e||0<=g&&f>g)&&(e=a.protocol&&1<a.protocol.length?a.protocol:b.protocol?b.protocol:"",f=b.pathname.lastIndexOf("/"),d=(e?e+"//":"")+(a.host?a.host:b.host?b.host:"")+("/"!=d.substring(0,
1)?b.pathname.substring(0,0>f?0:f)+"/":"")+d);return d};a.M=function(c){var b=a.D(c),d,f,e="",g=0;return b&&(d=c.protocol,f=c.onclick,!c.href||"A"!=b&&"AREA"!=b||f&&d&&!(0>d.toLowerCase().indexOf("javascript"))?f?(e=a.replace(a.replace(a.replace(a.replace(""+f,"\r",""),"\n",""),"\t","")," ",""),g=2):"INPUT"==b||"SUBMIT"==b?(c.value?e=c.value:c.innerText?e=c.innerText:c.textContent&&(e=c.textContent),g=3):"IMAGE"==b&&c.src&&(e=c.src):e=a.Ia(c),e)?{id:e.substring(0,100),type:g}:0};a.Qb=function(c){for(var b=
a.D(c),d=a.M(c);c&&!d&&"BODY"!=b;)if(c=c.parentElement?c.parentElement:c.parentNode)b=a.D(c),d=a.M(c);d&&"BODY"!=b||(c=0);c&&(b=c.onclick?""+c.onclick:"",0<=b.indexOf(".tl(")||0<=b.indexOf(".trackLink("))&&(c=0);return c};a.Hb=function(){var c,b,d=a.linkObject,f=a.linkType,e=a.linkURL,g,h;a.oa=1;d||(a.oa=0,d=a.clickObject);if(d){c=a.D(d);for(b=a.M(d);d&&!b&&"BODY"!=c;)if(d=d.parentElement?d.parentElement:d.parentNode)c=a.D(d),b=a.M(d);b&&"BODY"!=c||(d=0);if(d&&!a.linkObject){var l=d.onclick?""+d.onclick:
"";if(0<=l.indexOf(".tl(")||0<=l.indexOf(".trackLink("))d=0}}else a.oa=1;!e&&d&&(e=a.Ia(d));e&&!a.linkLeaveQueryString&&(g=e.indexOf("?"),0<=g&&(e=e.substring(0,g)));if(!f&&e){var m=0,q=0,n;if(a.trackDownloadLinks&&a.linkDownloadFileTypes)for(l=e.toLowerCase(),g=l.indexOf("?"),h=l.indexOf("#"),0<=g?0<=h&&h<g&&(g=h):g=h,0<=g&&(l=l.substring(0,g)),g=a.linkDownloadFileTypes.toLowerCase().split(","),h=0;h<g.length;h++)(n=g[h])&&l.substring(l.length-(n.length+1))=="."+n&&(f="d");if(a.trackExternalLinks&&
!f&&(l=e.toLowerCase(),a.La(l)&&(a.linkInternalFilters||(a.linkInternalFilters=k.location.hostname),g=0,a.linkExternalFilters?(g=a.linkExternalFilters.toLowerCase().split(","),m=1):a.linkInternalFilters&&(g=a.linkInternalFilters.toLowerCase().split(",")),g))){for(h=0;h<g.length;h++)n=g[h],0<=l.indexOf(n)&&(q=1);q?m&&(f="e"):m||(f="e")}}a.linkObject=d;a.linkURL=e;a.linkType=f;if(a.trackClickMap||a.trackInlineStats)a.e="",d&&(f=a.pageName,e=1,d=d.sourceIndex,f||(f=a.pageURL,e=0),k.s_objectID&&(b.id=
k.s_objectID,d=b.type=1),f&&b&&b.id&&c&&(a.e="&pid="+a.escape(f.substring(0,255))+(e?"&pidt="+e:"")+"&oid="+a.escape(b.id.substring(0,100))+(b.type?"&oidt="+b.type:"")+"&ot="+c+(d?"&oi="+d:"")))};a.Ab=function(){var c=a.oa,b=a.linkType,d=a.linkURL,f=a.linkName;b&&(d||f)&&(b=b.toLowerCase(),"d"!=b&&"e"!=b&&(b="o"),a.pe="lnk_"+b,a.pev1=d?a.escape(d):"",a.pev2=f?a.escape(f):"",c=1);a.abort&&(c=0);if(a.trackClickMap||a.trackInlineStats||a.ActivityMap){var b={},d=0,e=a.cookieRead("s_sq"),g=e?e.split("&"):
0,h,l,k,e=0;if(g)for(h=0;h<g.length;h++)l=g[h].split("="),f=a.unescape(l[0]).split(","),l=a.unescape(l[1]),b[l]=f;f=a.account.split(",");h={};for(k in a.contextData)k&&!Object.prototype[k]&&"a.activitymap."==k.substring(0,14)&&(h[k]=a.contextData[k],a.contextData[k]="");a.e=a.r("c",h)+(a.e?a.e:"");if(c||a.e){c&&!a.e&&(e=1);for(l in b)if(!Object.prototype[l])for(k=0;k<f.length;k++)for(e&&(g=b[l].join(","),g==a.account&&(a.e+=("&"!=l.charAt(0)?"&":"")+l,b[l]=[],d=1)),h=0;h<b[l].length;h++)g=b[l][h],
g==f[k]&&(e&&(a.e+="&u="+a.escape(g)+("&"!=l.charAt(0)?"&":"")+l+"&u=0"),b[l].splice(h,1),d=1);c||(d=1);if(d){e="";h=2;!c&&a.e&&(e=a.escape(f.join(","))+"="+a.escape(a.e),h=1);for(l in b)!Object.prototype[l]&&0<h&&0<b[l].length&&(e+=(e?"&":"")+a.escape(b[l].join(","))+"="+a.escape(l),h--);a.cookieWrite("s_sq",e)}}}return c};a.Bb=function(){if(!a.Lb){var c=new Date,b=n.location,d,f,e=f=d="",g="",h="",l="1.2",k=a.cookieWrite("s_cc","true",0)?"Y":"N",m="",p="";if(c.setUTCDate&&(l="1.3",(0).toPrecision&&
(l="1.5",c=[],c.forEach))){l="1.6";f=0;d={};try{f=new Iterator(d),f.next&&(l="1.7",c.reduce&&(l="1.8",l.trim&&(l="1.8.1",Date.parse&&(l="1.8.2",Object.create&&(l="1.8.5")))))}catch(r){}}d=screen.width+"x"+screen.height;e=navigator.javaEnabled()?"Y":"N";f=screen.pixelDepth?screen.pixelDepth:screen.colorDepth;g=a.w.innerWidth?a.w.innerWidth:a.d.documentElement.offsetWidth;h=a.w.innerHeight?a.w.innerHeight:a.d.documentElement.offsetHeight;try{a.b.addBehavior("#default#homePage"),m=a.b.Rb(b)?"Y":"N"}catch(s){}try{a.b.addBehavior("#default#clientCaps"),
p=a.b.connectionType}catch(t){}a.resolution=d;a.colorDepth=f;a.javascriptVersion=l;a.javaEnabled=e;a.cookiesEnabled=k;a.browserWidth=g;a.browserHeight=h;a.connectionType=p;a.homepage=m;a.Lb=1}};a.Q={};a.loadModule=function(c,b){var d=a.Q[c];if(!d){d=k["AppMeasurement_Module_"+c]?new k["AppMeasurement_Module_"+c](a):{};a.Q[c]=a[c]=d;d.eb=function(){return d.ib};d.jb=function(b){if(d.ib=b)a[c+"_onLoad"]=b,a.ia(c+"_onLoad",[a,d],1)||b(a,d)};try{Object.defineProperty?Object.defineProperty(d,"onLoad",
{get:d.eb,set:d.jb}):d._olc=1}catch(f){d._olc=1}}b&&(a[c+"_onLoad"]=b,a.ia(c+"_onLoad",[a,d],1)||b(a,d))};a.p=function(c){var b,d;for(b in a.Q)if(!Object.prototype[b]&&(d=a.Q[b])&&(d._olc&&d.onLoad&&(d._olc=0,d.onLoad(a,d)),d[c]&&d[c]()))return 1;return 0};a.Db=function(){var c=Math.floor(1E13*Math.random()),b=a.visitorSampling,d=a.visitorSamplingGroup,d="s_vsn_"+(a.visitorNamespace?a.visitorNamespace:a.account)+(d?"_"+d:""),f=a.cookieRead(d);if(b){b*=100;f&&(f=parseInt(f));if(!f){if(!a.cookieWrite(d,
c))return 0;f=c}if(f%1E4>b)return 0}return 1};a.R=function(c,b){var d,f,e,g,h,l;for(d=0;2>d;d++)for(f=0<d?a.Aa:a.g,e=0;e<f.length;e++)if(g=f[e],(h=c[g])||c["!"+g]){if(!b&&("contextData"==g||"retrieveLightData"==g)&&a[g])for(l in a[g])h[l]||(h[l]=a[g][l]);a[g]=h}};a.Va=function(c,b){var d,f,e,g;for(d=0;2>d;d++)for(f=0<d?a.Aa:a.g,e=0;e<f.length;e++)g=f[e],c[g]=a[g],b||c[g]||(c["!"+g]=1)};a.vb=function(a){var b,d,f,e,g,h=0,l,k="",m="";if(a&&255<a.length&&(b=""+a,d=b.indexOf("?"),0<d&&(l=b.substring(d+
1),b=b.substring(0,d),e=b.toLowerCase(),f=0,"http://"==e.substring(0,7)?f+=7:"https://"==e.substring(0,8)&&(f+=8),d=e.indexOf("/",f),0<d&&(e=e.substring(f,d),g=b.substring(d),b=b.substring(0,d),0<=e.indexOf("google")?h=",q,ie,start,search_key,word,kw,cd,":0<=e.indexOf("yahoo.co")&&(h=",p,ei,"),h&&l)))){if((a=l.split("&"))&&1<a.length){for(f=0;f<a.length;f++)e=a[f],d=e.indexOf("="),0<d&&0<=h.indexOf(","+e.substring(0,d)+",")?k+=(k?"&":"")+e:m+=(m?"&":"")+e;k&&m?l=k+"&"+m:m=""}d=253-(l.length-m.length)-
b.length;a=b+(0<d?g.substring(0,d):"")+"?"+l}return a};a.ab=function(c){var b=a.d.visibilityState,d=["webkitvisibilitychange","visibilitychange"];b||(b=a.d.webkitVisibilityState);if(b&&"prerender"==b){if(c)for(b=0;b<d.length;b++)a.d.addEventListener(d[b],function(){var b=a.d.visibilityState;b||(b=a.d.webkitVisibilityState);"visible"==b&&c()});return!1}return!0};a.ea=!1;a.J=!1;a.lb=function(){a.J=!0;a.j()};a.ca=!1;a.V=!1;a.hb=function(c){a.marketingCloudVisitorID=c;a.V=!0;a.j()};a.fa=!1;a.W=!1;a.mb=
function(c){a.visitorOptedOut=c;a.W=!0;a.j()};a.Z=!1;a.S=!1;a.Xa=function(c){a.analyticsVisitorID=c;a.S=!0;a.j()};a.ba=!1;a.U=!1;a.Za=function(c){a.audienceManagerLocationHint=c;a.U=!0;a.j()};a.aa=!1;a.T=!1;a.Ya=function(c){a.audienceManagerBlob=c;a.T=!0;a.j()};a.$a=function(c){a.maxDelay||(a.maxDelay=250);return a.p("_d")?(c&&setTimeout(function(){c()},a.maxDelay),!1):!0};a.da=!1;a.I=!1;a.xa=function(){a.I=!0;a.j()};a.isReadyToTrack=function(){var c=!0,b=a.visitor,d,f,e;a.ea||a.J||(a.ab(a.lb)?a.J=
!0:a.ea=!0);if(a.ea&&!a.J)return!1;b&&b.isAllowed()&&(a.ca||a.marketingCloudVisitorID||!b.getMarketingCloudVisitorID||(a.ca=!0,a.marketingCloudVisitorID=b.getMarketingCloudVisitorID([a,a.hb]),a.marketingCloudVisitorID&&(a.V=!0)),a.fa||a.visitorOptedOut||!b.isOptedOut||(a.fa=!0,a.visitorOptedOut=b.isOptedOut([a,a.mb]),a.visitorOptedOut!=p&&(a.W=!0)),a.Z||a.analyticsVisitorID||!b.getAnalyticsVisitorID||(a.Z=!0,a.analyticsVisitorID=b.getAnalyticsVisitorID([a,a.Xa]),a.analyticsVisitorID&&(a.S=!0)),a.ba||
a.audienceManagerLocationHint||!b.getAudienceManagerLocationHint||(a.ba=!0,a.audienceManagerLocationHint=b.getAudienceManagerLocationHint([a,a.Za]),a.audienceManagerLocationHint&&(a.U=!0)),a.aa||a.audienceManagerBlob||!b.getAudienceManagerBlob||(a.aa=!0,a.audienceManagerBlob=b.getAudienceManagerBlob([a,a.Ya]),a.audienceManagerBlob&&(a.T=!0)),c=a.ca&&!a.V&&!a.marketingCloudVisitorID,b=a.Z&&!a.S&&!a.analyticsVisitorID,d=a.ba&&!a.U&&!a.audienceManagerLocationHint,f=a.aa&&!a.T&&!a.audienceManagerBlob,
e=a.fa&&!a.W,c=c||b||d||f||e?!1:!0);a.da||a.I||(a.$a(a.xa)?a.I=!0:a.da=!0);a.da&&!a.I&&(c=!1);return c};a.o=p;a.u=0;a.callbackWhenReadyToTrack=function(c,b,d){var f;f={};f.qb=c;f.pb=b;f.nb=d;a.o==p&&(a.o=[]);a.o.push(f);0==a.u&&(a.u=setInterval(a.j,100))};a.j=function(){var c;if(a.isReadyToTrack()&&(a.kb(),a.o!=p))for(;0<a.o.length;)c=a.o.shift(),c.pb.apply(c.qb,c.nb)};a.kb=function(){a.u&&(clearInterval(a.u),a.u=0)};a.fb=function(c){var b,d,f=p,e=p;if(!a.isReadyToTrack()){b=[];if(c!=p)for(d in f=
{},c)f[d]=c[d];e={};a.Va(e,!0);b.push(f);b.push(e);a.callbackWhenReadyToTrack(a,a.track,b);return!0}return!1};a.xb=function(){var c=a.cookieRead("s_fid"),b="",d="",f;f=8;var e=4;if(!c||0>c.indexOf("-")){for(c=0;16>c;c++)f=Math.floor(Math.random()*f),b+="0123456789ABCDEF".substring(f,f+1),f=Math.floor(Math.random()*e),d+="0123456789ABCDEF".substring(f,f+1),f=e=16;c=b+"-"+d}a.cookieWrite("s_fid",c,1)||(c=0);return c};a.t=a.track=function(c,b){var d,f=new Date,e="s"+Math.floor(f.getTime()/108E5)%10+
Math.floor(1E13*Math.random()),g=f.getYear(),g="t="+a.escape(f.getDate()+"/"+f.getMonth()+"/"+(1900>g?g+1900:g)+" "+f.getHours()+":"+f.getMinutes()+":"+f.getSeconds()+" "+f.getDay()+" "+f.getTimezoneOffset());a.visitor&&a.visitor.getAuthState&&(a.authState=a.visitor.getAuthState());a.p("_s");a.fb(c)||(b&&a.R(b),c&&(d={},a.Va(d,0),a.R(c)),a.Db()&&!a.visitorOptedOut&&(a.analyticsVisitorID||a.marketingCloudVisitorID||(a.fid=a.xb()),a.Hb(),a.usePlugins&&a.doPlugins&&a.doPlugins(a),a.account&&(a.abort||
(a.trackOffline&&!a.timestamp&&(a.timestamp=Math.floor(f.getTime()/1E3)),f=k.location,a.pageURL||(a.pageURL=f.href?f.href:f),a.referrer||a.Wa||(f=a.Util.getQueryParam("adobe_mc_ref",null,null,!0),a.referrer=f||void 0===f?void 0===f?"":f:n.document.referrer),a.Wa=1,a.referrer=a.vb(a.referrer),a.p("_g")),a.Ab()&&!a.abort&&(a.visitor&&!a.supplementalDataID&&a.visitor.getSupplementalDataID&&(a.supplementalDataID=a.visitor.getSupplementalDataID("AppMeasurement:"+a._in,a.expectSupplementalData?!1:!0)),
a.Bb(),g+=a.zb(),a.Gb(e,g),a.p("_t"),a.referrer=""))),c&&a.R(d,1));a.abort=a.supplementalDataID=a.timestamp=a.pageURLRest=a.linkObject=a.clickObject=a.linkURL=a.linkName=a.linkType=k.s_objectID=a.pe=a.pev1=a.pev2=a.pev3=a.e=a.lightProfileID=0};a.za=[];a.registerPreTrackCallback=function(c){for(var b=[],d=1;d<arguments.length;d++)b.push(arguments[d]);"function"==typeof c?a.za.push([c,b]):a.debugTracking&&a.F("DEBUG: Non function type passed to registerPreTrackCallback")};a.cb=function(c){a.wa(a.za,
c)};a.ya=[];a.registerPostTrackCallback=function(c){for(var b=[],d=1;d<arguments.length;d++)b.push(arguments[d]);"function"==typeof c?a.ya.push([c,b]):a.debugTracking&&a.F("DEBUG: Non function type passed to registerPostTrackCallback")};a.bb=function(c){a.wa(a.ya,c)};a.wa=function(c,b){if("object"==typeof c)for(var d=0;d<c.length;d++){var f=c[d][0],e=c[d][1];e.unshift(b);if("function"==typeof f)try{f.apply(null,e)}catch(g){a.debugTracking&&a.F(g.message)}}};a.tl=a.trackLink=function(c,b,d,f,e){a.linkObject=
c;a.linkType=b;a.linkName=d;e&&(a.l=c,a.A=e);return a.track(f)};a.trackLight=function(c,b,d,f){a.lightProfileID=c;a.lightStoreForSeconds=b;a.lightIncrementBy=d;return a.track(f)};a.clearVars=function(){var c,b;for(c=0;c<a.g.length;c++)if(b=a.g[c],"prop"==b.substring(0,4)||"eVar"==b.substring(0,4)||"hier"==b.substring(0,4)||"list"==b.substring(0,4)||"channel"==b||"events"==b||"eventList"==b||"products"==b||"productList"==b||"purchaseID"==b||"transactionID"==b||"state"==b||"zip"==b||"campaign"==b)a[b]=
void 0};a.tagContainerMarker="";a.Gb=function(c,b){var d,f=a.trackingServer;d="";var e=a.dc,g="sc.",h=a.visitorNamespace;f?a.trackingServerSecure&&a.ssl&&(f=a.trackingServerSecure):(h||(h=a.account,f=h.indexOf(","),0<=f&&(h=h.substring(0,f)),h=h.replace(/[^A-Za-z0-9]/g,"")),d||(d="2o7.net"),e=e?(""+e).toLowerCase():"d1","2o7.net"==d&&("d1"==e?e="112":"d2"==e&&(e="122"),g=""),f=h+"."+e+"."+g+d);d=a.ssl?"https://":"http://";e=a.AudienceManagement&&a.AudienceManagement.isReady()||0!=a.usePostbacks;d+=
f+"/b/ss/"+a.account+"/"+(a.mobile?"5.":"")+(e?"10":"1")+"/JS-"+a.version+(a.Kb?"T":"")+(a.tagContainerMarker?"-"+a.tagContainerMarker:"")+"/"+c+"?AQB=1&ndh=1&pf=1&"+(e?"callback=s_c_il["+a._in+"].doPostbacks&et=1&":"")+b+"&AQE=1";a.cb(d);a.tb(d);a.ka()};a.Ua=/{(%?)(.*?)(%?)}/;a.Ob=RegExp(a.Ua.source,"g");a.ub=function(c){if("object"==typeof c.dests)for(var b=0;b<c.dests.length;++b){var d=c.dests[b];if("string"==typeof d.c&&"aa."==d.id.substr(0,3))for(var f=d.c.match(a.Ob),e=0;e<f.length;++e){var g=
f[e],h=g.match(a.Ua),k="";"%"==h[1]&&"timezone_offset"==h[2]?k=(new Date).getTimezoneOffset():"%"==h[1]&&"timestampz"==h[2]&&(k=a.yb());d.c=d.c.replace(g,a.escape(k))}}};a.yb=function(){var c=new Date,b=new Date(6E4*Math.abs(c.getTimezoneOffset()));return a.k(4,c.getFullYear())+"-"+a.k(2,c.getMonth()+1)+"-"+a.k(2,c.getDate())+"T"+a.k(2,c.getHours())+":"+a.k(2,c.getMinutes())+":"+a.k(2,c.getSeconds())+(0<c.getTimezoneOffset()?"-":"+")+a.k(2,b.getUTCHours())+":"+a.k(2,b.getUTCMinutes())};a.k=function(a,
b){return(Array(a+1).join(0)+b).slice(-a)};a.ta={};a.doPostbacks=function(c){if("object"==typeof c)if(a.ub(c),"object"==typeof a.AudienceManagement&&"function"==typeof a.AudienceManagement.isReady&&a.AudienceManagement.isReady()&&"function"==typeof a.AudienceManagement.passData)a.AudienceManagement.passData(c);else if("object"==typeof c&&"object"==typeof c.dests)for(var b=0;b<c.dests.length;++b){var d=c.dests[b];"object"==typeof d&&"string"==typeof d.c&&"string"==typeof d.id&&"aa."==d.id.substr(0,
3)&&(a.ta[d.id]=new Image,a.ta[d.id].alt="",a.ta[d.id].src=d.c)}};a.tb=function(c){a.i||a.Cb();a.i.push(c);a.ma=a.C();a.Sa()};a.Cb=function(){a.i=a.Eb();a.i||(a.i=[])};a.Eb=function(){var c,b;if(a.ra()){try{(b=k.localStorage.getItem(a.pa()))&&(c=k.JSON.parse(b))}catch(d){}return c}};a.ra=function(){var c=!0;a.trackOffline&&a.offlineFilename&&k.localStorage&&k.JSON||(c=!1);return c};a.Ja=function(){var c=0;a.i&&(c=a.i.length);a.q&&c++;return c};a.ka=function(){if(a.q&&(a.B&&a.B.complete&&a.B.G&&a.B.va(),
a.q))return;a.Ka=p;if(a.qa)a.ma>a.O&&a.Qa(a.i),a.ua(500);else{var c=a.ob();if(0<c)a.ua(c);else if(c=a.Ga())a.q=1,a.Fb(c),a.Jb(c)}};a.ua=function(c){a.Ka||(c||(c=0),a.Ka=setTimeout(a.ka,c))};a.ob=function(){var c;if(!a.trackOffline||0>=a.offlineThrottleDelay)return 0;c=a.C()-a.Pa;return a.offlineThrottleDelay<c?0:a.offlineThrottleDelay-c};a.Ga=function(){if(0<a.i.length)return a.i.shift()};a.Fb=function(c){if(a.debugTracking){var b="AppMeasurement Debug: "+c;c=c.split("&");var d;for(d=0;d<c.length;d++)b+=
"\n\t"+a.unescape(c[d]);a.F(b)}};a.gb=function(){return a.marketingCloudVisitorID||a.analyticsVisitorID};a.Y=!1;var t;try{t=JSON.parse('{"x":"y"}')}catch(w){t=null}t&&"y"==t.x?(a.Y=!0,a.X=function(a){return JSON.parse(a)}):k.$&&k.$.parseJSON?(a.X=function(a){return k.$.parseJSON(a)},a.Y=!0):a.X=function(){return null};a.Jb=function(c){var b,d,f;a.gb()&&2047<c.length&&("undefined"!=typeof XMLHttpRequest&&(b=new XMLHttpRequest,"withCredentials"in b?d=1:b=0),b||"undefined"==typeof XDomainRequest||(b=
new XDomainRequest,d=2),b&&(a.AudienceManagement&&a.AudienceManagement.isReady()||0!=a.usePostbacks)&&(a.Y?b.Ba=!0:b=0));!b&&a.Ta&&(c=c.substring(0,2047));!b&&a.d.createElement&&(0!=a.usePostbacks||a.AudienceManagement&&a.AudienceManagement.isReady())&&(b=a.d.createElement("SCRIPT"))&&"async"in b&&((f=(f=a.d.getElementsByTagName("HEAD"))&&f[0]?f[0]:a.d.body)?(b.type="text/javascript",b.setAttribute("async","async"),d=3):b=0);b||(b=new Image,b.alt="",b.abort||"undefined"===typeof k.InstallTrigger||
(b.abort=function(){b.src=p}));b.Da=function(){try{b.G&&(clearTimeout(b.G),b.G=0)}catch(a){}};b.onload=b.va=function(){a.bb(c);b.Da();a.sb();a.ga();a.q=0;a.ka();if(b.Ba){b.Ba=!1;try{a.doPostbacks(a.X(b.responseText))}catch(d){}}};b.onabort=b.onerror=b.Ha=function(){b.Da();(a.trackOffline||a.qa)&&a.q&&a.i.unshift(a.rb);a.q=0;a.ma>a.O&&a.Qa(a.i);a.ga();a.ua(500)};b.onreadystatechange=function(){4==b.readyState&&(200==b.status?b.va():b.Ha())};a.Pa=a.C();if(1==d||2==d){var e=c.indexOf("?");f=c.substring(0,
e);e=c.substring(e+1);e=e.replace(/&callback=[a-zA-Z0-9_.\[\]]+/,"");1==d?(b.open("POST",f,!0),b.send(e)):2==d&&(b.open("POST",f),b.send(e))}else if(b.src=c,3==d){if(a.Na)try{f.removeChild(a.Na)}catch(g){}f.firstChild?f.insertBefore(b,f.firstChild):f.appendChild(b);a.Na=a.B}b.G=setTimeout(function(){b.G&&(b.complete?b.va():(a.trackOffline&&b.abort&&b.abort(),b.Ha()))},5E3);a.rb=c;a.B=k["s_i_"+a.replace(a.account,",","_")]=b;if(a.useForcedLinkTracking&&a.K||a.A)a.forcedLinkTrackingTimeout||(a.forcedLinkTrackingTimeout=
250),a.ha=setTimeout(a.ga,a.forcedLinkTrackingTimeout)};a.sb=function(){if(a.ra()&&!(a.Oa>a.O))try{k.localStorage.removeItem(a.pa()),a.Oa=a.C()}catch(c){}};a.Qa=function(c){if(a.ra()){a.Sa();try{k.localStorage.setItem(a.pa(),k.JSON.stringify(c)),a.O=a.C()}catch(b){}}};a.Sa=function(){if(a.trackOffline){if(!a.offlineLimit||0>=a.offlineLimit)a.offlineLimit=10;for(;a.i.length>a.offlineLimit;)a.Ga()}};a.forceOffline=function(){a.qa=!0};a.forceOnline=function(){a.qa=!1};a.pa=function(){return a.offlineFilename+
"-"+a.visitorNamespace+a.account};a.C=function(){return(new Date).getTime()};a.La=function(a){a=a.toLowerCase();return 0!=a.indexOf("#")&&0!=a.indexOf("about:")&&0!=a.indexOf("opera:")&&0!=a.indexOf("javascript:")?!0:!1};a.setTagContainer=function(c){var b,d,f;a.Kb=c;for(b=0;b<a._il.length;b++)if((d=a._il[b])&&"s_l"==d._c&&d.tagContainerName==c){a.R(d);if(d.lmq)for(b=0;b<d.lmq.length;b++)f=d.lmq[b],a.loadModule(f.n);if(d.ml)for(f in d.ml)if(a[f])for(b in c=a[f],f=d.ml[f],f)!Object.prototype[b]&&("function"!=
typeof f[b]||0>(""+f[b]).indexOf("s_c_il"))&&(c[b]=f[b]);if(d.mmq)for(b=0;b<d.mmq.length;b++)f=d.mmq[b],a[f.m]&&(c=a[f.m],c[f.f]&&"function"==typeof c[f.f]&&(f.a?c[f.f].apply(c,f.a):c[f.f].apply(c)));if(d.tq)for(b=0;b<d.tq.length;b++)a.track(d.tq[b]);d.s=a;break}};a.Util={urlEncode:a.escape,urlDecode:a.unescape,cookieRead:a.cookieRead,cookieWrite:a.cookieWrite,getQueryParam:function(c,b,d,f){var e,g="";b||(b=a.pageURL?a.pageURL:k.location);d=d?d:"&";if(!c||!b)return g;b=""+b;e=b.indexOf("?");if(0>
e)return g;b=d+b.substring(e+1)+d;if(!f||!(0<=b.indexOf(d+c+d)||0<=b.indexOf(d+c+"="+d))){e=b.indexOf("#");0<=e&&(b=b.substr(0,e)+d);e=b.indexOf(d+c+"=");if(0>e)return g;b=b.substring(e+d.length+c.length+1);e=b.indexOf(d);0<=e&&(b=b.substring(0,e));0<b.length&&(g=a.unescape(b));return g}}};a.H="supplementalDataID timestamp dynamicVariablePrefix visitorID marketingCloudVisitorID analyticsVisitorID audienceManagerLocationHint authState fid vmk visitorMigrationKey visitorMigrationServer visitorMigrationServerSecure charSet visitorNamespace cookieDomainPeriods fpCookieDomainPeriods cookieLifetime pageName pageURL customerPerspective referrer contextData currencyCode lightProfileID lightStoreForSeconds lightIncrementBy retrieveLightProfiles deleteLightProfiles retrieveLightData".split(" ");
a.g=a.H.concat("purchaseID variableProvider channel server pageType transactionID campaign state zip events events2 products audienceManagerBlob tnt".split(" "));a.na="timestamp charSet visitorNamespace cookieDomainPeriods cookieLifetime contextData lightProfileID lightStoreForSeconds lightIncrementBy".split(" ");a.P=a.na.slice(0);a.Aa="account allAccounts debugTracking visitor visitorOptedOut trackOffline offlineLimit offlineThrottleDelay offlineFilename usePlugins doPlugins configURL visitorSampling visitorSamplingGroup linkObject clickObject linkURL linkName linkType trackDownloadLinks trackExternalLinks trackClickMap trackInlineStats linkLeaveQueryString linkTrackVars linkTrackEvents linkDownloadFileTypes linkExternalFilters linkInternalFilters useForcedLinkTracking forcedLinkTrackingTimeout trackingServer trackingServerSecure ssl abort mobile dc lightTrackVars maxDelay expectSupplementalData usePostbacks registerPreTrackCallback registerPostTrackCallback AudienceManagement".split(" ");
for(m=0;250>=m;m++)76>m&&(a.g.push("prop"+m),a.P.push("prop"+m)),a.g.push("eVar"+m),a.P.push("eVar"+m),6>m&&a.g.push("hier"+m),4>m&&a.g.push("list"+m);m="pe pev1 pev2 pev3 latitude longitude resolution colorDepth javascriptVersion javaEnabled cookiesEnabled browserWidth browserHeight connectionType homepage pageURLRest marketingCloudOrgID".split(" ");a.g=a.g.concat(m);a.H=a.H.concat(m);a.ssl=0<=k.location.protocol.toLowerCase().indexOf("https");a.charSet="UTF-8";a.contextData={};a.offlineThrottleDelay=
0;a.offlineFilename="AppMeasurement.offline";a.Pa=0;a.ma=0;a.O=0;a.Oa=0;a.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx";a.w=k;a.d=k.document;try{if(a.Ta=!1,navigator){var v=navigator.userAgent;if("Microsoft Internet Explorer"==navigator.appName||0<=v.indexOf("MSIE ")||0<=v.indexOf("Trident/")&&0<=v.indexOf("Windows NT 6"))a.Ta=!0}}catch(x){}a.ga=function(){a.ha&&(k.clearTimeout(a.ha),a.ha=p);a.l&&a.K&&a.l.dispatchEvent(a.K);a.A&&("function"==typeof a.A?a.A():
a.l&&a.l.href&&(a.d.location=a.l.href));a.l=a.K=a.A=0};a.Ra=function(){a.b=a.d.body;a.b?(a.v=function(c){var b,d,f,e,g;if(!(a.d&&a.d.getElementById("cppXYctnr")||c&&c["s_fe_"+a._in])){if(a.Ca)if(a.useForcedLinkTracking)a.b.removeEventListener("click",a.v,!1);else{a.b.removeEventListener("click",a.v,!0);a.Ca=a.useForcedLinkTracking=0;return}else a.useForcedLinkTracking=0;a.clickObject=c.srcElement?c.srcElement:c.target;try{if(!a.clickObject||a.N&&a.N==a.clickObject||!(a.clickObject.tagName||a.clickObject.parentElement||
a.clickObject.parentNode))a.clickObject=0;else{var h=a.N=a.clickObject;a.la&&(clearTimeout(a.la),a.la=0);a.la=setTimeout(function(){a.N==h&&(a.N=0)},1E4);f=a.Ja();a.track();if(f<a.Ja()&&a.useForcedLinkTracking&&c.target){for(e=c.target;e&&e!=a.b&&"A"!=e.tagName.toUpperCase()&&"AREA"!=e.tagName.toUpperCase();)e=e.parentNode;if(e&&(g=e.href,a.La(g)||(g=0),d=e.target,c.target.dispatchEvent&&g&&(!d||"_self"==d||"_top"==d||"_parent"==d||k.name&&d==k.name))){try{b=a.d.createEvent("MouseEvents")}catch(l){b=
new k.MouseEvent}if(b){try{b.initMouseEvent("click",c.bubbles,c.cancelable,c.view,c.detail,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.button,c.relatedTarget)}catch(m){b=0}b&&(b["s_fe_"+a._in]=b.s_fe=1,c.stopPropagation(),c.stopImmediatePropagation&&c.stopImmediatePropagation(),c.preventDefault(),a.l=c.target,a.K=b)}}}}}catch(n){a.clickObject=0}}},a.b&&a.b.attachEvent?a.b.attachEvent("onclick",a.v):a.b&&a.b.addEventListener&&(navigator&&(0<=navigator.userAgent.indexOf("WebKit")&&
a.d.createEvent||0<=navigator.userAgent.indexOf("Firefox/2")&&k.MouseEvent)&&(a.Ca=1,a.useForcedLinkTracking=1,a.b.addEventListener("click",a.v,!0)),a.b.addEventListener("click",a.v,!1))):setTimeout(a.Ra,30)};a.Ra();r?a.setAccount(r):a.F("Error, missing Report Suite ID in AppMeasurement initialization");a.loadModule("ActivityMap")}
function s_gi(r){var a,k=window.s_c_il,p,n,m=r.split(","),s,u,t=0;if(k)for(p=0;!t&&p<k.length;){a=k[p];if("s_c"==a._c&&(a.account||a.oun))if(a.account&&a.account==r)t=1;else for(n=a.account?a.account:a.oun,n=a.allAccounts?a.allAccounts:n.split(","),s=0;s<m.length;s++)for(u=0;u<n.length;u++)m[s]==n[u]&&(t=1);p++}t?a.setAccount&&a.setAccount(r):a=new AppMeasurement(r);return a}AppMeasurement.getInstance=s_gi;window.s_objectID||(window.s_objectID=0);
function s_pgicq(){var r=window,a=r.s_giq,k,p,n;if(a)for(k=0;k<a.length;k++)p=a[k],n=s_gi(p.oun),n.setAccount(p.un),n.setTagContainer(p.tagContainerName);r.s_giq=0}s_pgicq();